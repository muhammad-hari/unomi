!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).dxp=t()}}((function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return o(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){var r=t("@ndhoule/arity"),o=Object.prototype.toString;e.exports=function(t,e){if("number"!==(i=typeof(n=t))&&("object"!==i||"[object Number]"!==o.call(n)))throw new TypeError("Expected a number but received "+typeof t);var n,i;if(!function(t){return"function"==typeof t}(e))throw new TypeError("Expected a function but received "+typeof e);var a=0;return r(e.length,(function(){if(!((a+=1)<t))return e.apply(this,arguments)}))}},{"@ndhoule/arity":2}],2:[function(t,e,n){var r=Object.prototype.toString,o=[function(t){return function(){return t.apply(this,arguments)}},function(t){return function(e){return t.apply(this,arguments)}},function(t){return function(e,n){return t.apply(this,arguments)}},function(t){return function(e,n,r){return t.apply(this,arguments)}},function(t){return function(e,n,r,o){return t.apply(this,arguments)}},function(t){return function(e,n,r,o,i){return t.apply(this,arguments)}}];e.exports=function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function but got "+typeof e);return t=Math.max(function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===r.call(t)}(t)?t:0,0),o[t]||(o[t]=function(t){var e=function(t){for(var e=[],n=1;n<=t;n+=1)e.push("arg"+n);return e}(t).join(", "),n="".concat("  return function(",e,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",n)}(t)),o[t](e)}},{}],3:[function(t,e,n){var r=t("component-type");e.exports=function t(e){var n=r(e);if("object"===n){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=t(e[i]));return o}if("array"===n){o=new Array(e.length);for(var a=0,s=e.length;a<s;a++)o[a]=t(e[a]);return o}if("regexp"===n){var c="";return c+=e.multiline?"m":"",c+=e.global?"g":"",c+=e.ignoreCase?"i":"",new RegExp(e.source,c)}return"date"===n?new Date(e.getTime()):e}},{"component-type":57}],4:[function(t,e,n){var r=t("@ndhoule/drop"),o=t("@ndhoule/rest"),i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=function(t){return Boolean(t)&&"[object Object]"===a.call(t)},c=function(t,e,n,r){return i.call(e,r)&&void 0===t[r]&&(t[r]=n),e},u=function(t,e,n,r){return i.call(e,r)&&(s(t[r])&&s(n)?t[r]=p(t[r],n):void 0===t[r]&&(t[r]=n)),e},l=function(t,e){if(n=e,!Boolean(n)||"object"!=typeof n)return e;var n;t=t||c;for(var o=r(2,arguments),i=0;i<o.length;i+=1)for(var a in o[i])t(e,o[i],o[i][a],a);return e},p=function(t){return l.apply(null,[u,t].concat(o(arguments)))};e.exports=function(t){return l.apply(null,[null,t].concat(o(arguments)))},e.exports.deep=p},{"@ndhoule/drop":5,"@ndhoule/rest":14}],5:[function(t,e,n){var r=Math.max;e.exports=function(t,e){var n=e?e.length:0;if(!n)return[];for(var o=r(Number(t)||0,0),i=r(n-o,0),a=new Array(i),s=0;s<i;s+=1)a[s]=e[s+o];return a}},{}],6:[function(t,e,n){var r=t("@ndhoule/keys"),o=Object.prototype.toString,i="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===o.call(t)},a=function(t){return null!=t&&(i(t)||"function"!==t&&function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===o.call(t)}(t.length))},s=function(t,e){for(var n=0;n<e.length&&!1!==t(e[n],n,e);n+=1);},c=function(t,e){for(var n=r(e),o=0;o<n.length&&!1!==t(e[n[o]],n[o],e);o+=1);};e.exports=function(t,e){return(a(e)?s:c).call(this,t,e)}},{"@ndhoule/keys":11}],7:[function(t,e,n){var r=t("@ndhoule/each");e.exports=function(t,e){if("function"!=typeof t)throw new TypeError("`predicate` must be a function but was a "+typeof t);var n=!0;return r((function(e,r,o){if(!(n=!!t(e,r,o)))return!1}),e),n}},{"@ndhoule/each":6}],8:[function(t,e,n){var r=Object.prototype.hasOwnProperty;e.exports=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n+=1)for(var o in e[n])r.call(e[n],o)&&(t[o]=e[n][o]);return t}},{}],9:[function(t,e,n){var r=t("@ndhoule/each");e.exports=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function but received a "+typeof t);return r((function(n,r,o){e=t(e,n,r,o)}),n),e}},{"@ndhoule/each":6}],10:[function(t,e,n){var r=t("@ndhoule/each"),o=String.prototype.indexOf;e.exports=function(t,e){var n=!1;return"string"==typeof e?-1!==o.call(e,t):(r((function(e){if((r=e)===(o=t)?0!==r||1/r==1/o:r!=r&&o!=o)return n=!0,!1;var r,o}),e),n)}},{"@ndhoule/each":6}],11:[function(t,e,n){var r=Object.prototype.hasOwnProperty,o=String.prototype.charAt,i=Object.prototype.toString,a=function(t,e){return o.call(t,e)},s=function(t,e){return r.call(t,e)},c=function(t,e){e=e||s;for(var n=[],r=0,o=t.length;r<o;r+=1)e(t,r)&&n.push(String(r));return n};e.exports=function(t){return null==t?[]:(e=t,"[object String]"===i.call(e)?c(t,a):function(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}(t)?c(t,s):function(t,e){e=e||s;var n=[];for(var r in t)e(t,r)&&n.push(String(r));return n}(t));var e}},{}],12:[function(t,e,n){var r=t("@ndhoule/each");e.exports=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function but received a "+typeof t);var n=[];return r((function(e,r,o){n.push(t(e,r,o))}),e),n}},{"@ndhoule/each":6}],13:[function(t,e,n){var r=Object.prototype.toString,o=function(t){return"string"==typeof t||"[object String]"===r.call(t)};e.exports=function(t,e){if(null==e||!function(t){return null!=t&&"object"==typeof t}(e))return{};o(t)&&(t=[t]),function(t){return"[object Array]"===r.call(t)}(t)||(t=[]);for(var n={},i=0;i<t.length;i+=1)o(t[i])&&t[i]in e&&(n[t[i]]=e[t[i]]);return n}},{}],14:[function(t,e,n){var r=Math.max;e.exports=function(t){if(null==t||!t.length)return[];for(var e=new Array(r(t.length-2,0)),n=1;n<t.length;n+=1)e[n-1]=t[n];return e}},{}],15:[function(t,e,n){(function(n){(function(){var r=n.analytics,o=t("segmentio-facade").Alias,i=t("component-emitter"),a=t("segmentio-facade"),s=t("segmentio-facade").Group,c=t("segmentio-facade").Identify,u=t("./middleware").SourceMiddlewareChain,l=t("./middleware").IntegrationMiddlewareChain,p=t("segmentio-facade").Page,f=t("segmentio-facade").Track,d=t("bind-all"),h=t("@ndhoule/clone"),y=t("extend"),g=t("./cookie"),m=t("./metrics"),v=t("debug"),b=t("@ndhoule/defaults"),w=t("@ndhoule/each"),j=t("@ndhoule/foldl"),x=t("./group"),_=t("is"),k=t("@segment/is-meta"),I=t("@ndhoule/keys"),A=t("./memory"),C=t("next-tick"),O=t("./normalize"),S=t("component-event").bind,T=t("./pageDefaults"),E=t("@ndhoule/pick"),D=t("@segment/prevent-default"),N=t("component-querystring"),z=t("./store"),M=t("./user"),P=t("component-type");function L(){this._options({}),this.Integrations={},this._sourceMiddlewares=new u,this._integrationMiddlewares=new l,this._integrations={},this._readied=!1,this._timeout=300,this._user=M,this.log=v("analytics.js"),d(this);var t=this;this.on("initialize",(function(e,n){n.initialPageview&&t.page(),t._parseQuery(window.location.search)}))}i(L.prototype),L.prototype.use=function(t){return t(this),this},L.prototype.addIntegration=function(t){var e=t.prototype.name;if(!e)throw new TypeError("attempted to add an invalid integration");return this.Integrations[e]=t,this},L.prototype.addSourceMiddleware=function(t){if(this.initialized)throw new Error("attempted to add a source middleware after initialization");return this._sourceMiddlewares.add(t),this},L.prototype.addIntegrationMiddleware=function(t){if(this.initialized)throw new Error("attempted to add an integration middleware after initialization");return this._integrationMiddlewares.add(t),this},L.prototype.init=L.prototype.initialize=function(t,e){t=t||{},e=e||{},this._options(e),this._readied=!1;var n=this;w((function(e,r){n.Integrations[r]||delete t[r]}),t),w((function(t,r){if(!e.integrations||!1!==e.integrations[r]&&(!1!==e.integrations.All||e.integrations[r])){var o=n.Integrations[r],i={};y(!0,i,t);var a=new o(i);n.log("initialize %o - %o",r,t),n.add(a)}}),t);var r=this._integrations;M.load(),x.load();var o=0,i=I(r).length,a=function(){++o>=i&&(n._readied=!0,n.emit("ready"))};i<=0&&a(),this.failedInitializations=[];var s=!1;return w((function(t){if(e.initialPageview&&!1===t.options.initialPageview){var r=t.page;t.page=function(){if(s)return r.apply(this,arguments);s=!0}}t.analytics=n,t.once("ready",a);try{m.increment("analytics_js.integration.invoke",{method:"initialize",integration_name:t.name}),t.initialize()}catch(e){var o=t.name;m.increment("analytics_js.integration.invoke.error",{method:"initialize",integration_name:t.name}),n.failedInitializations.push(o),n.log("Error initializing %s integration: %o",o,e),t.ready()}}),r),this.initialized=!0,this.emit("initialize",t,e),this},L.prototype.setAnonymousId=function(t){return this.user().anonymousId(t),this},L.prototype.add=function(t){return this._integrations[t.name]=t,this},L.prototype.identify=function(t,e,n,r){_.fn(n)&&(r=n,n=null),_.fn(e)&&(r=e,n=null,e=null),_.object(t)&&(n=e,e=t,t=M.id()),M.identify(t,e);var o=this.normalize({options:n,traits:M.traits(),userId:M.id()});return this.options.integrations&&b(o.integrations,this.options.integrations),this._invoke("identify",new c(o)),this.emit("identify",t,e,n),this._callback(r),this},L.prototype.user=function(){return M},L.prototype.group=function(t,e,n,r){if(!arguments.length)return x;_.fn(n)&&(r=n,n=null),_.fn(e)&&(r=e,n=null,e=null),_.object(t)&&(n=e,e=t,t=x.id()),x.identify(t,e);var o=this.normalize({options:n,traits:x.traits(),groupId:x.id()});return this.options.integrations&&b(o.integrations,this.options.integrations),this._invoke("group",new s(o)),this.emit("group",t,e,n),this._callback(r),this},L.prototype.track=function(t,e,n,r){_.fn(n)&&(r=n,n=null),_.fn(e)&&(r=e,n=null,e=null);var o=this.options.plan||{},i=o.track||{},a={},s=this.normalize({properties:e,options:n,event:t});(o=i[t])?(this.log("plan %o - %o",t,o),a=!1===o.enabled?{All:!1,"Segment.io":!0}:o.integrations||{}):(i.__default||{enabled:!0}).enabled||(a={All:!1,"Segment.io":!0});return b(s.integrations,this._mergeInitializeAndPlanIntegrations(a)),this._invoke("track",new f(s)),this.emit("track",t,e,n),this._callback(r),this},L.prototype.trackClick=L.prototype.trackLink=function(t,e,n){if(!t)return this;"element"===P(t)&&(t=[t]);var r=this;return w((function(t){if("element"!==P(t))throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.");S(t,"click",(function(o){var i=_.fn(e)?e(t):e,a=_.fn(n)?n(t):n,s=t.getAttribute("href")||t.getAttributeNS("http://www.w3.org/1999/xlink","href")||t.getAttribute("xlink:href");r.track(i,a),s&&"_blank"!==t.target&&!k(o)&&(D(o),r._callback((function(){window.location.href=s})))}))}),t),this},L.prototype.trackSubmit=L.prototype.trackForm=function(t,e,n){if(!t)return this;"element"===P(t)&&(t=[t]);var r=this;return w((function(t){if("element"!==P(t))throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");function o(o){D(o);var i=_.fn(e)?e(t):e,a=_.fn(n)?n(t):n;r.track(i,a),r._callback((function(){t.submit()}))}var i=window.jQuery||window.Zepto;i?i(t).submit(o):S(t,"submit",o)}),t),this},L.prototype.page=function(t,e,n,r,o){_.fn(r)&&(o=r,r=null),_.fn(n)&&(o=n,r=n=null),_.fn(e)&&(o=e,r=n=e=null),"object"===P(t)&&(r=e,n=t,e=t=null),"object"===P(e)&&(r=n,n=e,e=null),"string"===P(t)&&"string"!==P(e)&&(e=t,t=null),n=h(n)||{},e&&(n.name=e),t&&(n.category=t);var i=T();b(n,i);var a=E(I(i),n);_.empty(a)||((r=r||{}).context=r.context||{},r.context.page=a);var s=this.normalize({properties:n,category:t,options:r,name:e});return this.options.integrations&&b(s.integrations,this.options.integrations),this._invoke("page",new p(s)),this.emit("page",t,e,n,r),this._callback(o),this},L.prototype.pageview=function(t){var e={};return t&&(e.path=t),this.page(e),this},L.prototype.alias=function(t,e,n,r){_.fn(n)&&(r=n,n=null),_.fn(e)&&(r=e,n=null,e=null),_.object(e)&&(n=e,e=null);var i=this.normalize({options:n,previousId:e,userId:t});return this.options.integrations&&b(i.integrations,this.options.integrations),this._invoke("alias",new o(i)),this.emit("alias",t,e,n),this._callback(r),this},L.prototype.ready=function(t){return _.fn(t)&&(this._readied?C(t):this.once("ready",t)),this},L.prototype.timeout=function(t){this._timeout=t},L.prototype.debug=function(t){!arguments.length||t?v.enable("analytics:"+(t||"*")):v.disable()},L.prototype._options=function(t){return t=t||{},this.options=t,g.options(t.cookie),m.options(t.metrics),z.options(t.localStorage),M.options(t.user),x.options(t.group),this},L.prototype._callback=function(t){return _.fn(t)&&(this._timeout?setTimeout(t,this._timeout):C(t)),this},L.prototype._invoke=function(t,e){var n=this;try{this._sourceMiddlewares.applyMiddlewares(y(!0,new a({}),e),this._integrations,(function(e){null!==e?(e instanceof a||(e=new a(e)),n.emit("invoke",e),m.increment("analytics_js.invoke",{method:t}),function(e){var r=n.failedInitializations||[];w((function(o,i){var s=y(!0,new a({}),e);if(s.enabled(i))if(r.indexOf(i)>=0)n.log("Skipping invocation of .%s method of %s integration. Integration failed to initialize properly.",t,i);else try{n._integrationMiddlewares.applyMiddlewares(s,o.name,(function(e){null!==e?(e instanceof a||(e=new a(e)),m.increment("analytics_js.integration.invoke",{method:t,integration_name:o.name}),o.invoke.call(o,t,e)):n.log('Payload to integration "%s" was null and dropped by a middleware.',i)}))}catch(e){m.increment("analytics_js.integration.invoke.error",{method:t,integration_name:o.name}),n.log("Error invoking .%s method of %s integration: %o",t,i,e)}}),n._integrations)}(e)):n.log('Payload with method "%s" was null and dropped by source a middleware.',t)}))}catch(e){m.increment("analytics_js.invoke.error",{method:t}),n.log("Error invoking .%s method of %s integration: %o",t,name,e)}return this},L.prototype.push=function(t){var e=t.shift();this[e]&&this[e].apply(this,t)},L.prototype.reset=function(){this.user().logout(),this.group().logout()},L.prototype._parseQuery=function(t){var e=N.parse(t),n=o("ajs_trait_",e),r=o("ajs_prop_",e);return e.ajs_uid&&this.identify(e.ajs_uid,n),e.ajs_event&&this.track(e.ajs_event,r),e.ajs_aid&&M.anonymousId(e.ajs_aid),this;function o(t,e){var n=t.length;return j((function(e,r,o){return o.substr(0,n)===t&&(e[o.substr(n)]=r),e}),{},e)}},L.prototype.normalize=function(t){return(t=O(t,I(this._integrations))).anonymousId&&M.anonymousId(t.anonymousId),t.anonymousId=M.anonymousId(),t.context.page=b(t.context.page||{},T()),t},L.prototype._mergeInitializeAndPlanIntegrations=function(t){if(!this.options.integrations)return t;var e,n=y({},this.options.integrations);for(e in!1===t.All&&(n={All:!1}),t)t.hasOwnProperty(e)&&!1!==this.options.integrations[e]&&(n[e]=t[e]);return n},L.prototype.noConflict=function(){return window.analytics=r,this},e.exports=L,e.exports.cookie=g,e.exports.memory=A,e.exports.store=z,e.exports.metrics=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cookie":16,"./group":18,"./memory":20,"./metrics":21,"./middleware":22,"./normalize":23,"./pageDefaults":24,"./store":25,"./user":26,"@ndhoule/clone":3,"@ndhoule/defaults":4,"@ndhoule/each":6,"@ndhoule/foldl":9,"@ndhoule/keys":11,"@ndhoule/pick":13,"@segment/is-meta":35,"@segment/prevent-default":39,"bind-all":44,"component-emitter":52,"component-event":53,"component-querystring":55,"component-type":57,debug:27,extend:62,is:66,"next-tick":76,"segmentio-facade":86}],16:[function(t,e,n){var r=t("bind-all"),o=t("@ndhoule/clone"),i=t("component-cookie"),a=t("debug")("analytics.js:cookie"),s=t("@ndhoule/defaults"),c=t("json3"),u=t("@segment/top-domain");function l(t){this.options(t)}l.prototype.options=function(t){if(0===arguments.length)return this._options;t=t||{};var e="."+u(window.location.href);"."===e&&(e=null),this._options=s(t,{maxage:31536e6,path:"/",domain:e}),this.set("ajs:test",!0),this.get("ajs:test")||(a("fallback to domain=null"),this._options.domain=null),this.remove("ajs:test")},l.prototype.set=function(t,e){try{return e=c.stringify(e),i(t,e,o(this._options)),!0}catch(t){return!1}},l.prototype.get=function(t){try{var e=i(t);return e=e?c.parse(e):null}catch(t){return null}},l.prototype.remove=function(t){try{return i(t,null,o(this._options)),!0}catch(t){return!1}},e.exports=r(new l),e.exports.Cookie=l},{"@ndhoule/clone":3,"@ndhoule/defaults":4,"@segment/top-domain":42,"bind-all":44,"component-cookie":46,debug:27,json3:67}],17:[function(t,e,n){var r=t("@ndhoule/clone"),o=t("./cookie"),i=t("debug")("analytics:entity"),a=t("@ndhoule/defaults"),s=t("@ndhoule/extend"),c=t("./memory"),u=t("./store"),l=t("@segment/isodate-traverse");function p(t){this.options(t),this.initialize()}e.exports=p,p.prototype.initialize=function(){if(o.set("ajs:cookies",!0),o.get("ajs:cookies"))return o.remove("ajs:cookies"),void(this._storage=o);u.enabled?this._storage=u:(i("warning using memory store both cookies and localStorage are disabled"),this._storage=c)},p.prototype.storage=function(){return this._storage},p.prototype.options=function(t){if(0===arguments.length)return this._options;this._options=a(t||{},this.defaults||{})},p.prototype.id=function(t){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(t)}},p.prototype._getId=function(){if(!this._options.persist)return void 0===this._id?null:this._id;var t=this._getIdFromCookie();if(t)return t;var e=this._getIdFromLocalStorage();return e?(this._setIdInCookies(e),e):null},p.prototype._getIdFromCookie=function(){return this.storage().get(this._options.cookie.key)},p.prototype._getIdFromLocalStorage=function(){return this._options.localStorageFallbackDisabled?null:u.get(this._options.cookie.key)},p.prototype._setId=function(t){this._options.persist?(this._setIdInCookies(t),this._setIdInLocalStorage(t)):this._id=t},p.prototype._setIdInCookies=function(t){this.storage().set(this._options.cookie.key,t)},p.prototype._setIdInLocalStorage=function(t){this._options.localStorageFallbackDisabled||u.set(this._options.cookie.key,t)},p.prototype.properties=p.prototype.traits=function(t){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(t)}},p.prototype._getTraits=function(){var t=this._options.persist?u.get(this._options.localStorage.key):this._traits;return t?l(r(t)):{}},p.prototype._setTraits=function(t){t=t||{},this._options.persist?u.set(this._options.localStorage.key,t):this._traits=t},p.prototype.identify=function(t,e){e=e||{};var n=this.id();null!==n&&n!==t||(e=s(this.traits(),e)),t&&this.id(t),this.debug("identify %o, %o",t,e),this.traits(e),this.save()},p.prototype.save=function(){return!!this._options.persist&&(this._setId(this.id()),this._setTraits(this.traits()),!0)},p.prototype.logout=function(){this.id(null),this.traits({}),this.storage().remove(this._options.cookie.key),u.remove(this._options.cookie.key),u.remove(this._options.localStorage.key)},p.prototype.reset=function(){this.logout(),this.options({})},p.prototype.load=function(){this.id(this.id()),this.traits(this.traits())}},{"./cookie":16,"./memory":20,"./store":25,"@ndhoule/clone":3,"@ndhoule/defaults":4,"@ndhoule/extend":8,"@segment/isodate-traverse":36,debug:27}],18:[function(t,e,n){var r=t("./entity"),o=t("bind-all"),i=t("debug")("analytics:group"),a=t("inherits");function s(t){this.defaults=s.defaults,this.debug=i,r.call(this,t)}s.defaults={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},a(s,r),e.exports=o(new s),e.exports.Group=s},{"./entity":17,"bind-all":44,debug:27,inherits:64}],19:[function(t,e,n){var r=new(t("./analytics"));r.VERSION=t("../package.json").version,e.exports=r},{"../package.json":28,"./analytics":15}],20:[function(t,e,n){var r=t("bind-all"),o=t("@ndhoule/clone"),i=Object.prototype.hasOwnProperty;function a(){this.store={}}e.exports=r(new a),a.prototype.set=function(t,e){return this.store[t]=o(e),!0},a.prototype.get=function(t){if(i.call(this.store,t))return o(this.store[t])},a.prototype.remove=function(t){return delete this.store[t],!0}},{"@ndhoule/clone":3,"bind-all":44}],21:[function(t,e,n){var r=t("bind-all"),o=t("@segment/send-json"),i=t("debug")("analytics.js:metrics");function a(t){this.options(t)}a.prototype.options=function(t){if(t=t||{},this.host=t.host||"api.segment.io/v1",this.sampleRate=t.sampleRate||0,this.flushTimer=t.flushTimer||3e4,this.maxQueueSize=t.maxQueueSize||20,this.queue=[],this.sampleRate>0){var e=this;setInterval((function(){e._flush()}),this.flushTimer)}},a.prototype.increment=function(t,e){Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize||(this.queue.push({type:"Counter",metric:t,value:1,tags:e}),t.indexOf("error")>0&&this._flush())},a.prototype._flush=function(){if(!(this.queue.length<=0)){var t={series:this.queue};this.queue=[],"xhr"===o.type&&o("https://"+this.host+"/m",t,{"Content-Type":"text/plain"},(function(e,n){i("sent %O, received %O",t,[e,n])}))}},e.exports=r(new a),e.exports.Metrics=a},{"@segment/send-json":40,"bind-all":44,debug:27}],22:[function(t,e,n){var r=t("segmentio-facade");function o(t){var e=[];return t.getMiddlewares=function(){return e.slice()},t.add=function(t){if("function"!=typeof t)throw new Error("attempted to add non-function middleware");if(-1!==e.indexOf(t))throw new Error("middleware is already registered");e.push(t)},function(t,n,r){if("object"!=typeof n)throw new Error("applyMiddlewares requires a payload object");if("function"!=typeof r)throw new Error("applyMiddlewares requires a function callback");var o=e.slice();o.push(r),i(t,n,o,0)}}function i(t,e,n,o){if(null!==e){e instanceof r||(e=new r(e));var a=n[o];a&&(n[o+1]?t(a,e,(function(e){i(t,e,n,++o)})):a(e))}else n[n.length-1](null)}e.exports.SourceMiddlewareChain=function(){var t=o(this);this.applyMiddlewares=function(e,n,r){return t((function(t,e,r){t({integrations:n,next:r,payload:e})}),e,r)}},e.exports.IntegrationMiddlewareChain=function(){var t=o(this);this.applyMiddlewares=function(e,n,r){return t((function(t,e,r){t(e,n,r)}),e,r)}},e.exports.middlewareChain=o},{"segmentio-facade":86}],23:[function(t,e,n){var r=t("debug")("analytics.js:normalize"),o=t("@ndhoule/defaults"),i=t("@ndhoule/each"),a=t("@ndhoule/includes"),s=t("@ndhoule/map"),c=t("component-type"),u=t("uuid").v4,l=t("json3"),p=t("spark-md5").hash,f=Object.prototype.hasOwnProperty;e.exports=function(t,e){var n=s((function(t){return t.toLowerCase()}),e),h=t.options||{},y=h.integrations||{},g=h.providers||{},m=h.context||{},v={};return r("<-",t),i((function(t,e){b(e)&&(f.call(y,e)||(y[e]=t),delete h[e])}),h),delete h.providers,i((function(t,e){b(e)&&"object"!==c(y[e])&&(f.call(y,e)&&"boolean"==typeof g[e]||(y[e]=t))}),g),i((function(t,e){a(e,d)?v[e]=h[e]:m[e]=h[e]}),h),t.messageId="ajs-"+p(l.stringify(t)+u()),delete t.options,v.integrations=y,v.context=m,v=o(v,t),r("->",v),v;function b(t){return!(!a(t,e)&&"all"!==t.toLowerCase()&&!a(t.toLowerCase(),n))}};var d=["integrations","anonymousId","timestamp","context"]},{"@ndhoule/defaults":4,"@ndhoule/each":6,"@ndhoule/includes":10,"@ndhoule/map":12,"component-type":57,debug:27,json3:67,"spark-md5":93,uuid:101}],24:[function(t,e,n){var r=t("@segment/canonical"),o=t("@ndhoule/includes"),i=t("component-url");function a(){var t=r();return t?i.parse(t).pathname:window.location.pathname}function s(t){var e=r();if(e)return o("?",e)?e:e+t;var n=window.location.href,i=n.indexOf("#");return-1===i?n:n.slice(0,i)}e.exports=function(){return{path:a(),referrer:document.referrer,search:location.search,title:document.title,url:s(location.search)}}},{"@ndhoule/includes":10,"@segment/canonical":33,"component-url":58}],25:[function(t,e,n){var r=t("bind-all"),o=t("@ndhoule/defaults"),i=t("@segment/store");function a(t){this.options(t)}a.prototype.options=function(t){if(0===arguments.length)return this._options;o(t=t||{},{enabled:!0}),this.enabled=t.enabled&&i.enabled,this._options=t},a.prototype.set=function(t,e){return!!this.enabled&&i.set(t,e)},a.prototype.get=function(t){return this.enabled?i.get(t):null},a.prototype.remove=function(t){return!!this.enabled&&i.remove(t)},e.exports=r(new a),e.exports.Store=a},{"@ndhoule/defaults":4,"@segment/store":41,"bind-all":44}],26:[function(t,e,n){var r=t("./entity"),o=t("bind-all"),i=t("./cookie"),a=t("debug")("analytics:user"),s=t("inherits"),c=t("component-cookie"),u=t("uuid"),l=t("./store");function p(t){this.defaults=p.defaults,this.debug=a,r.call(this,t)}p.defaults={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},s(p,r),p.prototype.id=function(t){var e=this._getId(),n=r.prototype.id.apply(this,arguments);return null==e||e!=t&&t&&this.anonymousId(null),n},p.prototype.anonymousId=function(t){var e=this.storage();return arguments.length?(e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),this):(t=e.get("ajs_anonymous_id"))?(this._setAnonymousIdInLocalStorage(t),e.set("ajs_anonymous_id",t),t):!this._options.localStorageFallbackDisabled&&(t=l.get("ajs_anonymous_id"))?(e.set("ajs_anonymous_id",t),t):(t=c("_sio"))?(t=t.split("----")[0],e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),e.remove("_sio"),t):(t=u.v4(),e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),e.get("ajs_anonymous_id"))},p.prototype._setAnonymousIdInLocalStorage=function(t){this._options.localStorageFallbackDisabled||l.set("ajs_anonymous_id",t)},p.prototype.logout=function(){r.prototype.logout.call(this),this.anonymousId(null)},p.prototype.load=function(){this._loadOldCookie()||r.prototype.load.call(this)},p.prototype._loadOldCookie=function(){var t=i.get(this._options.cookie.oldKey);return!!t&&(this.id(t.id),this.traits(t.traits),i.remove(this._options.cookie.oldKey),!0)},e.exports=o(new p),e.exports.User=p},{"./cookie":16,"./entity":17,"./store":25,"bind-all":44,"component-cookie":46,debug:27,inherits:64,uuid:101}],27:[function(t,e,n){function r(t){return r.enabled(t)?function(e){var n;e=(n=e)instanceof Error?n.stack||n.message:n;var o=new Date,i=o-(r[t]||o);r[t]=o,e=t+" "+e+" +"+r.humanize(i),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=r,r.names=[],r.skips=[],r.enable=function(t){try{localStorage.debug=t}catch(t){}for(var e=(t||"").split(/[\s,]+/),n=e.length,o=0;o<n;o++)"-"===(t=e[o].replace("*",".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$"))},r.disable=function(){r.enable("")},r.humanize=function(t){var e=6e4,n=60*e;return t>=n?(t/n).toFixed(1)+"h":t>=e?(t/e).toFixed(1)+"m":t>=1e3?(t/1e3|0)+"s":t+"ms"},r.enabled=function(t){for(var e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(t){}},{}],28:[function(t,e,n){e.exports={name:"@segment/analytics.js-core",author:"Segment <friends@segment.com>",version:"3.10.1",description:"The hassle-free way to integrate analytics into any web application.",keywords:["analytics","analytics.js","segment","segment.io"],main:"lib/index.js",scripts:{test:"make test",lint:'eslint "./{lib,test}/**/*.js"',format:'prettier-eslint --write --list-different "./{lib,test}/**/*.{js,json,md}"',precommit:"lint-staged",np:"np --no-publish",cz:"git-cz",commitmsg:"commitlint -E GIT_PARAMS"},repository:{type:"git",url:"https://github.com/segmentio/analytics.js-core"},license:"SEE LICENSE IN LICENSE",bugs:{url:"https://github.com/segmentio/analytics.js-core/issues"},homepage:"https://github.com/segmentio/analytics.js-core#readme",dependencies:{"@ndhoule/clone":"^1.0.0","@ndhoule/defaults":"^2.0.1","@ndhoule/each":"^2.0.1","@ndhoule/extend":"^2.0.0","@ndhoule/foldl":"^2.0.1","@ndhoule/includes":"^2.0.1","@ndhoule/keys":"^2.0.0","@ndhoule/map":"^2.0.1","@ndhoule/pick":"^2.0.0","@segment/canonical":"^1.0.0","@segment/is-meta":"^1.0.0","@segment/isodate":"^1.0.2","@segment/isodate-traverse":"^1.0.1","@segment/prevent-default":"^1.0.0","@segment/send-json":"^3.0.0","@segment/store":"^1.3.20","@segment/top-domain":"^3.0.0","bind-all":"^1.0.0","component-cookie":"^1.1.2","component-emitter":"^1.2.1","component-event":"^0.1.4","component-querystring":"^2.0.0","component-type":"^1.2.1","component-url":"^0.2.1",debug:"^0.7.4",extend:"3.0.2",inherits:"^2.0.1",install:"^0.7.3",is:"^3.1.0",json3:"^3.3.2","new-date":"^1.0.0","next-tick":"^0.2.2","segmentio-facade":"^3.0.2","spark-md5":"^2.0.2",uuid:"^2.0.2"},devDependencies:{"@commitlint/cli":"^7.0.0","@commitlint/config-conventional":"^7.0.1","@segment/analytics.js-integration":"^3.2.1","@segment/eslint-config":"^4.0.0",browserify:"13.0.0","browserify-istanbul":"^2.0.0",codecov:"^3.0.2",commitizen:"^2.10.1","commitlint-circle":"^1.0.0","compat-trigger-event":"^1.0.0","component-each":"^0.2.6","cz-conventional-changelog":"^2.1.0",eslint:"^4.19.1","eslint-config-prettier":"^2.9.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-react":"^7.9.1","eslint-plugin-require-path-exists":"^1.1.8",husky:"^0.14.3",istanbul:"^0.4.3",jquery:"^3.2.1",karma:"1.3.0","karma-browserify":"^5.0.4","karma-chrome-launcher":"^1.0.1","karma-coverage":"^1.0.0","karma-junit-reporter":"^1.0.0","karma-mocha":"1.0.1","karma-phantomjs-launcher":"^1.0.0","karma-sauce-launcher":"^1.0.0","karma-spec-reporter":"0.0.26","karma-summary-reporter":"^1.5.0","lint-staged":"^7.2.0",mocha:"^2.2.5",np:"^3.0.4","phantomjs-prebuilt":"^2.1.7","prettier-eslint-cli":"^4.7.1",proclaim:"^3.4.1",sinon:"^1.7.3",snyk:"^1.83.0",watchify:"^3.7.0"},commitlint:{extends:["@commitlint/config-conventional"]},"lint-staged":{linters:{"*.{js,json,md}":["prettier-eslint --write","git add"]}},config:{commitizen:{path:"cz-conventional-changelog"}}}},{}],29:[function(t,e,n){var r=t("component-bind"),o=t("lodash.clonedeep"),i=t("debug"),a=t("@ndhoule/defaults"),s=t("@ndhoule/extend"),c=t("slug-component"),u=t("./protos"),l=t("./statics");e.exports=function(t){function e(n){if(n&&n.addIntegration)return n.addIntegration(e);this.debug=i("analytics:integration:"+c(t)),this.options=a(o(n)||{},this.defaults),this._queue=[],this.once("ready",r(this,this.flush)),e.emit("construct",this),this.ready=r(this,this.ready),this._wrapInitialize(),this._wrapPage(),this._wrapTrack()}return e.prototype.defaults={},e.prototype.globals=[],e.prototype.templates={},e.prototype.name=t,s(e,l),s(e.prototype,u),e}},{"./protos":30,"./statics":31,"@ndhoule/defaults":4,"@ndhoule/extend":8,"component-bind":45,debug:59,"lodash.clonedeep":70,"slug-component":92}],30:[function(t,e,n){var r=t("component-emitter"),o=t("@ndhoule/after"),i=t("@ndhoule/each"),a=t("analytics-events"),s=t("@ndhoule/every"),c=t("@segment/fmt"),u=t("@ndhoule/foldl"),l=t("is"),p=t("load-iframe"),f=t("@segment/load-script"),d=t("next-tick"),h=t("to-no-case"),y=Object.prototype.hasOwnProperty,g=function(){},m=window.onerror;function v(t){return!!l.object(t)&&(!!l.string(t.key)&&!!y.call(t,"value"))}r(n),n.initialize=function(){var t=this.ready;d(t)},n.loaded=function(){return!1},n.page=function(t){},n.track=function(t){},n.map=function(t,e){var n=h(e),r=function(t){if(l.array(t))return s(v,t)?"mixed":"array";return l.object(t)?"map":"unknown"}(t);return"unknown"===r?[]:u((function(t,e,o){var i,a;return"map"===r&&(i=o,a=e),"array"===r&&(i=e,a=e),"mixed"===r&&(i=e.key,a=e.value),h(i)===n&&t.push(a),t}),[],t)},n.invoke=function(t){if(this[t]){var e,n=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(t,n);try{this.debug("%s with %o",t,n),e=this[t].apply(this,n)}catch(e){this.debug("error %o calling %s with %o",e,t,n)}return e}},n.queue=function(t,e){this._queue.push({method:t,args:e})},n.flush=function(){this._ready=!0;var t=this;i((function(e){t[e.method].apply(t,e.args)}),this._queue),this._queue.length=0},n.reset=function(){for(var t=0;t<this.globals.length;t++)window[this.globals[t]]=void 0;window.onerror=m,window.onload=null},n.load=function(t,e,n){"function"==typeof t&&(n=t,e=null,t=null),t&&"object"==typeof t&&(n=e,e=t,t=null),"function"==typeof e&&(n=e,e=null),t=t||"library",e=e||{},e=this.locals(e);var r=this.templates[t];if(!r)throw new Error(c('template "%s" not defined.',t));var o=function(t,e){return u((function(t,n,r){return t[r]=n.replace(/\{\{\ *(\w+)\ *\}\}/g,(function(t,n){return e[n]})),t}),{},t.attrs)}(r,e);n=n||g;var a,s=this;switch(r.type){case"img":o.width=1,o.height=1,a=function(t,e){e=e||function(){};var n=new Image;return n.onerror=function(t,e,n){return function(r){r=r||window.event;var o=new Error(e);o.event=r,o.source=n,t(o)}}(e,"failed to load pixel",n),n.onload=function(){e()},n.src=t.src,n.width=1,n.height=1,n}(o,n);break;case"script":a=f(o,(function(t){if(!t)return n();s.debug('error loading "%s" error="%s"',s.name,t)})),delete o.src,i((function(t,e){a.setAttribute(e,t)}),o);break;case"iframe":a=p(o,n)}return a},n.locals=function(t){t=t||{};var e=Math.floor((new Date).getTime()/36e5);return t.hasOwnProperty("cache")||(t.cache=e),i((function(e,n){t.hasOwnProperty(n)||(t[n]=e)}),this.options),t},n.ready=function(){this.emit("ready")},n._wrapInitialize=function(){var t=this.initialize;this.initialize=function(){this.debug("initialize"),this._initialized=!0;var e=t.apply(this,arguments);return this.emit("initialize"),e}},n._wrapPage=function(){if(this._assumesPageview)return this.page=o(2,this.page)},n._wrapTrack=function(){var t=this.track;this.track=function(e){var n,r,o=e.event();for(var i in a)if(y.call(a,i)){var s=a[i];if(!this[i])continue;if(!s.test(o))continue;r=this[i].apply(this,arguments),n=!0;break}return n||(r=t.apply(this,arguments)),r}}},{"@ndhoule/after":1,"@ndhoule/each":6,"@ndhoule/every":7,"@ndhoule/foldl":9,"@segment/fmt":34,"@segment/load-script":38,"analytics-events":43,"component-emitter":52,is:66,"load-iframe":69,"next-tick":76,"to-no-case":96}],31:[function(t,e,n){var r=t("component-emitter"),o=t("domify"),i=t("@ndhoule/each"),a=t("@ndhoule/includes");r(n),n.option=function(t,e){return this.prototype.defaults[t]=e,this},n.mapping=function(t){return this.option(t,[]),this.prototype[t]=function(e){return this.map(this.options[t],e)},this},n.global=function(t){return this.prototype.globals.push(t),this},n.assumesPageview=function(){return this.prototype._assumesPageview=!0,this},n.readyOnLoad=function(){return this.prototype._readyOnLoad=!0,this},n.readyOnInitialize=function(){return this.prototype._readyOnInitialize=!0,this},n.tag=function(t,e){return null==e&&(e=t,t="library"),this.prototype.templates[t]=function(t){t=t.replace(' src="',' data-src="');var e=o(t),n={};return i((function(e){var r="data-src"===e.name?"src":e.name;a(e.name+"=",t)&&(n[r]=e.value)}),e.attributes),{type:e.tagName.toLowerCase(),attrs:n}}(e),this}},{"@ndhoule/each":6,"@ndhoule/includes":10,"component-emitter":52,domify:61}],32:[function(t,e,n){var r=t("utf8-encode"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.exports=function(t){var e,n,i,a,s,c,u,l="",p=0;t=r(t);for(;p<t.length;)a=(e=t.charCodeAt(p++))>>2,s=(3&e)<<4|(n=t.charCodeAt(p++))>>4,c=(15&n)<<2|(i=t.charCodeAt(p++))>>6,u=63&i,isNaN(n)?c=u=64:isNaN(i)&&(u=64),l=l+o.charAt(a)+o.charAt(s)+o.charAt(c)+o.charAt(u);return l}},{"utf8-encode":99}],33:[function(t,e,n){e.exports=function(){for(var t,e=document.getElementsByTagName("link"),n=0;t=e[n];n++)if("canonical"===t.getAttribute("rel"))return t.getAttribute("href")}},{}],34:[function(t,e,n){(function(t){(function(){var n=t.JSON&&"function"==typeof JSON.stringify?JSON.stringify:String;function r(t){var e=Array.prototype.slice.call(arguments,1),n=0;return t.replace(/%([a-z])/gi,(function(t,o){return r[o]?r[o](e[n++]):t+o}))}r.o=n,r.s=String,r.d=parseInt,e.exports=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(t,e,n){e.exports=function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return!0;var e=t.which,n=t.button;return e||void 0===n?2===e:1&!n&&2&!n&&4&n}},{}],36:[function(t,e,n){var r=t("component-type"),o=t("component-each"),i=t("@segment/isodate");function a(t,e){return void 0===e&&(e=!0),"object"===r(t)?function(t,e){t.length&&"number"==typeof t.length&&!(t.length-1 in t)&&(t.lengthNonArray=t.length,delete t.length);o(t,(function(n,o){i.is(o,e)?t[n]=i.parse(o):"object"!==r(o)&&"array"!==r(o)||a(o,e)})),t.lengthNonArray&&(t.length=t.lengthNonArray,delete t.lengthNonArray);return t}(t,e):"array"===r(t)?function(t,e){return o(t,(function(n,o){"object"===r(n)?a(n,e):i.is(n,e)&&(t[o]=i.parse(n))})),t}(t,e):t}e.exports=a},{"@segment/isodate":37,"component-each":50,"component-type":57}],37:[function(t,e,n){var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;n.parse=function(t){var e=[1,5,6,7,11,12],n=r.exec(t),o=0;if(!n)return new Date(t);for(var i,a=0;i=e[a];a++)n[i]=parseInt(n[i],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?o=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(o=60*n[11]+n[12],"+"===n[10]&&(o=0-o));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+o,n[7],n[8]);return new Date(s)},n.is=function(t,e){return"string"==typeof t&&((!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&r.test(t))}},{}],38:[function(t,e,n){var r=t("script-onload"),o=t("next-tick"),i=t("component-type");e.exports=function(t,e){if(!t)throw new Error("Can't load nothing...");"string"===i(t)&&(t={src:t});var n="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=(n?"https:":"http:")+t.src),n&&t.https?t.src=t.https:!n&&t.http&&(t.src=t.http);var a=document.createElement("script");return a.type="text/javascript",a.async=!0,a.src=t.src,"function"===i(e)&&r(a,e),o((function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t)})),a}},{"component-type":57,"next-tick":76,"script-onload":79}],39:[function(t,e,n){e.exports=function(t){return(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1}},{}],40:[function(t,e,n){var r=t("json3"),o=t("@segment/base64-encode"),i=t("has-cors"),a=t("jsonp");function s(t,e,n,o){3===arguments.length&&(o=n,n={});var i=new XMLHttpRequest;for(var a in i.onerror=o,i.onreadystatechange=function(){if(4===i.readyState)return o(null,i)},i.open("POST",t,!0),n)i.setRequestHeader(a,n[a]);i.send(r.stringify(e))}function c(t,e,i,s){3===arguments.length&&(s=i);var c=n.prefix,u=function(t){var e="";return e=r.stringify(t),e=(e=o(e)).replace(/\+/g,"-").replace(/\//g,"_"),encodeURIComponent(e)}(e);a(t+="?"+c+"="+u,{param:n.callback},(function(e,n){if(e)return s(e);s(null,{url:t,body:n})}))}(n=e.exports=i?s:c).callback="callback",n.prefix="data",n.json=s,n.base64=c,n.type=i?"xhr":"jsonp"},{"@segment/base64-encode":32,"has-cors":63,json3:67,jsonp:68}],41:[function(t,e,n){(function(n){(function(){var r=t("json3");e.exports=function(){var t,e={},o="undefined"!=typeof window?window:n,i=o.document,a="localStorage",s="script";if(e.disabled=!1,e.version="1.3.20",e.set=function(t,e){},e.get=function(t,e){},e.has=function(t){return void 0!==e.get(t)},e.remove=function(t){},e.clear=function(){},e.transact=function(t,n,r){null==r&&(r=n,n=null),null==n&&(n={});var o=e.get(t,n);r(o),e.set(t,o)},e.getAll=function(){var t={};return e.forEach((function(e,n){t[e]=n})),t},e.forEach=function(){},e.serialize=function(t){return r.stringify(t)},e.deserialize=function(t){if("string"==typeof t)try{return r.parse(t)}catch(e){return t||void 0}},function(){try{return a in o&&o[a]}catch(t){return!1}}())t=o[a],e.set=function(n,r){return void 0===r?e.remove(n):(t.setItem(n,e.serialize(r)),r)},e.get=function(n,r){var o=e.deserialize(t.getItem(n));return void 0===o?r:o},e.remove=function(e){t.removeItem(e)},e.clear=function(){t.clear()},e.forEach=function(n){for(var r=0;r<t.length;r++){var o=t.key(r);n(o,e.get(o))}};else if(i&&i.documentElement.addBehavior){var c,u;try{(u=new ActiveXObject("htmlfile")).open(),u.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),u.close(),c=u.w.frames[0].document,t=c.createElement("div")}catch(e){t=i.createElement("div"),c=i.body}var l=function(n){return function(){var r=Array.prototype.slice.call(arguments,0);r.unshift(t),c.appendChild(t),t.addBehavior("#default#userData"),t.load(a);var o=n.apply(e,r);return c.removeChild(t),o}},p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),f=function(t){return t.replace(/^d/,"___$&").replace(p,"___")};e.set=l((function(t,n,r){return n=f(n),void 0===r?e.remove(n):(t.setAttribute(n,e.serialize(r)),t.save(a),r)})),e.get=l((function(t,n,r){n=f(n);var o=e.deserialize(t.getAttribute(n));return void 0===o?r:o})),e.remove=l((function(t,e){e=f(e),t.removeAttribute(e),t.save(a)})),e.clear=l((function(t){var e=t.XMLDocument.documentElement.attributes;t.load(a);for(var n=e.length-1;n>=0;n--)t.removeAttribute(e[n].name);t.save(a)})),e.forEach=l((function(t,n){for(var r,o=t.XMLDocument.documentElement.attributes,i=0;r=o[i];++i)n(r.name,e.deserialize(t.getAttribute(r.name)))}))}try{var d="__storejs__";e.set(d,d),e.get(d)!=d&&(e.disabled=!0),e.remove(d)}catch(t){e.disabled=!0}return e.enabled=!e.disabled,e}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{json3:67}],42:[function(t,e,n){var r=t("component-url").parse,o=t("component-cookie");function i(t){for(var e=n.cookie,r=n.levels(t),o=0;o<r.length;++o){var i="__tld__",a=r[o],s={domain:"."+a};if(e(i,1,s),e(i))return e(i,null,s),a}return""}i.levels=function(t){var e=r(t).hostname.split("."),n=e[e.length-1],o=[];if(4===e.length&&n===parseInt(n,10))return o;if(e.length<=1)return o;for(var i=e.length-2;i>=0;--i)o.push(e.slice(i).join("."));return o},i.cookie=o,n=e.exports=i},{"component-cookie":46,"component-url":58}],43:[function(t,e,n){var r=t("@ndhoule/map"),o=t("@ndhoule/foldl");e.exports=o((function(t,e,n){var o=r((function(t){return r((function(t){return"^[ _]?"+[].concat.apply([],r((function(t){return t.split(" ")}),t)).join("[ _]?")+"[ _]?"}),[[t.action,t.object],[t.object,t.action]]).join("|")}),e).join("|")+"$";return t[n]=new RegExp(o,"i"),t}),{},{videoPlaybackStarted:[{object:"video playback",action:"started"}],videoPlaybackPaused:[{object:"video playback",action:"paused"}],videoPlaybackInterrupted:[{object:"video playback",action:"interrupted"}],videoPlaybackResumed:[{object:"video playback",action:"resumed"}],videoPlaybackCompleted:[{object:"video playback",action:"completed"}],videoPlaybackBufferStarted:[{object:"video playback buffer",action:"started"}],videoPlaybackBufferCompleted:[{object:"video playback buffer",action:"completed"}],videoPlaybackSeekStarted:[{object:"video playback seek",action:"started"}],videoPlaybackSeekCompleted:[{object:"video playback seek",action:"completed"}],videoContentStarted:[{object:"video content",action:"started"}],videoContentPlaying:[{object:"video content",action:"playing"}],videoContentCompleted:[{object:"video content",action:"completed"}],videoAdStarted:[{object:"video ad",action:"started"}],videoAdPlaying:[{object:"video ad",action:"playing"}],videoAdCompleted:[{object:"video ad",action:"completed"}],promotionViewed:[{object:"promotion",action:"viewed"}],promotionClicked:[{object:"promotion",action:"clicked"}],productsSearched:[{object:"products",action:"searched"}],productListViewed:[{object:"product list",action:"viewed"},{object:"product category",action:"viewed"}],productListFiltered:[{object:"product list",action:"filtered"}],productClicked:[{object:"product",action:"clicked"}],productViewed:[{object:"product",action:"viewed"}],productAdded:[{object:"product",action:"added"}],productRemoved:[{object:"product",action:"removed"}],cartViewed:[{object:"cart",action:"viewed"}],orderUpdated:[{object:"order",action:"updated"}],orderCompleted:[{object:"order",action:"completed"}],orderRefunded:[{object:"order",action:"refunded"}],orderCancelled:[{object:"order",action:"cancelled"}],paymentInfoEntered:[{object:"payment info",action:"entered"}],checkoutStarted:[{object:"checkout",action:"started"}],checkoutStepViewed:[{object:"checkout step",action:"viewed"}],checkoutStepCompleted:[{object:"checkout step",action:"completed"}],couponEntered:[{object:"coupon",action:"entered"}],couponApplied:[{object:"coupon",action:"applied"}],couponDenied:[{object:"coupon",action:"denied"}],couponRemoved:[{object:"coupon",action:"removed"}],productAddedToWishlist:[{object:"product",action:"added to wishlist"}],productRemovedFromWishlist:[{object:"product",action:"removed from wishlist"}],productAddedFromWishlistToCart:[{object:"product",action:"added to cart from wishlist"},{object:"product",action:"added from wishlist to cart"}],productShared:[{object:"product",action:"shared"}],cartShared:[{object:"cart",action:"shared"}],productReviewed:[{object:"product",action:"reviewed"}],applicationInstalled:[{object:"application",action:"installed"}],applicationUpdated:[{object:"application",action:"updated"}],applicationOpened:[{object:"application",action:"opened"}],applicationBackgrounded:[{object:"application",action:"backgrounded"}],applicationUninstalled:[{object:"application",action:"uninstalled"}],applicationCrashed:[{object:"application",action:"crashed"}],installAttributed:[{object:"install",action:"attributed"}],deepLinkOpened:[{object:"deep link",action:"opened"}],pushNotificationReceived:[{object:"push notification",action:"received"}],pushNotificationTapped:[{object:"push notification",action:"tapped"}],pushNotificationBounced:[{object:"push notification",action:"bounced"}],emailBounced:[{object:"email",action:"bounced"}],emailDelivered:[{object:"email",action:"delivered"}],emailLinkClicked:[{object:"email link",action:"clicked"}],emailMarkedAsSpam:[{object:"email",action:"marked as spam"}],emailOpened:[{object:"email",action:"opened"}],unsubscribed:[{object:"",action:"unsubscribed"}]})},{"@ndhoule/foldl":9,"@ndhoule/map":12}],44:[function(t,e,n){var r=t("component-bind");e.exports=function(t){for(var e in t){"function"==typeof t[e]&&(t[e]=r(t,t[e]))}return t}},{"component-bind":45}],45:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],46:[function(t,e,n){var r=t("debug")("cookie");function o(){var t;try{t=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return function(t){var e,n={},r=t.split(/ *; */);if(""==r[0])return n;for(var o=0;o<r.length;++o)n[a((e=r[o].split("="))[0])]=a(e[1]);return n}(t)}function i(t){try{return encodeURIComponent(t)}catch(e){r("error `encode(%o)` - %o",t,e)}}function a(t){try{return decodeURIComponent(t)}catch(e){r("error `decode(%o)` - %o",t,e)}}e.exports=function(t,e,n){switch(arguments.length){case 3:case 2:return function(t,e,n){n=n||{};var r=i(t)+"="+i(e);null==e&&(n.maxage=-1);n.maxage&&(n.expires=new Date(+new Date+n.maxage));n.path&&(r+="; path="+n.path);n.domain&&(r+="; domain="+n.domain);n.expires&&(r+="; expires="+n.expires.toUTCString());n.secure&&(r+="; secure");document.cookie=r}(t,e,n);case 1:return function(t){return o()[t]}(t);default:return o()}}},{debug:47}],47:[function(t,e,n){function r(){var t;try{t=n.storage.debug}catch(t){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,r),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(r())},{"./debug":48}],48:[function(t,e,n){n=e.exports=function(t){function e(){}function i(){var t=i,e=+new Date,a=e-(r||e);t.diff=a,t.prev=r,t.curr=e,r=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=n.colors[o++%n.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,(function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var i=s[c];e=o.call(t,i),s.splice(c,1),c--}return e})),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s)),(i.log||n.log||console.log.bind(console)).apply(t,s)}e.enabled=!1,i.enabled=!0;var a=n.enabled(t)?i:e;return a.namespace=t,a},n.coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,o=0;o<r;o++)e[o]&&("-"===(t=e[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var r,o=0},{ms:49}],49:[function(t,e,n){var r=1e3,o=60*r,i=60*o,a=24*i,s=365.25*a;function c(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(t):e.long?c(n=t,a,"day")||c(n,i,"hour")||c(n,o,"minute")||c(n,r,"second")||n+" ms":function(t){return t>=a?Math.round(t/a)+"d":t>=i?Math.round(t/i)+"h":t>=o?Math.round(t/o)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);var n}},{}],50:[function(t,e,n){try{var r=t("type")}catch(e){r=t("component-type")}var o=t("to-function"),i=Object.prototype.hasOwnProperty;function a(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t[r],r)}e.exports=function(t,e,n){switch(e=o(e),n=n||this,r(t)){case"array":return a(t,e,n);case"object":return"number"==typeof t.length?a(t,e,n):function(t,e,n){for(var r in t)i.call(t,r)&&e.call(n,r,t[r])}(t,e,n);case"string":return function(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t.charAt(r),r)}(t,e,n)}}},{"component-type":51,"to-function":95,type:51}],51:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===t?"null":void 0===t?"undefined":t&&1===t.nodeType?"element":t===Object(t)?"object":typeof t}},{}],52:[function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}void 0!==e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],53:[function(t,e,n){var r=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==r?"on":"";n.bind=function(t,e,n,o){return t[r](i+e,n,o||!1),n},n.unbind=function(t,e,n,r){return t[o](i+e,n,r||!1),n}},{}],54:[function(t,e,n){var r=/\b(Array|Date|Object|Math|JSON)\b/g;e.exports=function(t,e){var n=function(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(r,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return e&&"string"==typeof e&&(e=function(t){return function(e){return t+e}}(e)),e?function(t,e,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,(function(t){return"("==t[t.length-1]||~e.indexOf(t)?n(t):t}))}(t,n,e):n}},{}],55:[function(t,e,n){var r=t("trim"),o=t("type"),i=/(\w+)\[(\d+)\]/,a=function(t){try{return encodeURIComponent(t)}catch(e){return t}},s=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}};n.parse=function(t){if("string"!=typeof t)return{};if(""==(t=r(t)))return{};"?"==t.charAt(0)&&(t=t.slice(1));for(var e={},n=t.split("&"),o=0;o<n.length;o++){var a,c=n[o].split("="),u=s(c[0]);(a=i.exec(u))?(e[a[1]]=e[a[1]]||[],e[a[1]][a[2]]=s(c[1])):e[c[0]]=null==c[1]?"":s(c[1])}return e},n.stringify=function(t){if(!t)return"";var e=[];for(var n in t){var r=t[n];if("array"!=o(r))e.push(a(n)+"="+a(t[n]));else for(var i=0;i<r.length;++i)e.push(a(n+"["+i+"]")+"="+a(r[i]))}return e.join("&")}},{trim:97,type:56}],56:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!=t?"nan":t&&1===t.nodeType?"element":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}},{}],57:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!=t?"nan":t&&1===t.nodeType?"element":null!=(e=t)&&(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))?"buffer":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t));var e}},{}],58:[function(t,e,n){function r(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}n.parse=function(t){var e=document.createElement("a");return e.href=t,{href:e.href,host:e.host||location.host,port:"0"===e.port||""===e.port?r(e.protocol):e.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:"/"!=e.pathname.charAt(0)?"/"+e.pathname:e.pathname,protocol:e.protocol&&":"!=e.protocol?e.protocol:location.protocol,search:e.search,query:e.search.slice(1)}},n.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")},n.isRelative=function(t){return!n.isAbsolute(t)},n.isCrossDomain=function(t){t=n.parse(t);var e=n.parse(window.location.href);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol}},{}],59:[function(t,e,n){(function(r){(function(){function o(){var t;try{t=n.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(t){var e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,r)},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=o,n.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},n.enable(o())}).call(this)}).call(this,t("_process"))},{"./debug":60,_process:78}],60:[function(t,e,n){var r;function o(t){function e(){if(e.enabled){var t=e,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;c++;var o=n.formatters[r];if("function"==typeof o){var i=a[c];e=o.call(t,i),a.splice(c,1),c--}return e})),n.formatArgs.call(t,a),(e.log||n.log||console.log.bind(console)).apply(t,a)}}return e.namespace=t,e.enabled=n.enabled(t),e.useColors=n.useColors(),e.color=function(t){var e,r=0;for(e in t)r=(r<<5)-r+t.charCodeAt(e),r|=0;return n.colors[Math.abs(r)%n.colors.length]}(t),"function"==typeof n.init&&n.init(e),e}(n=e.exports=o.debug=o.default=o).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t),n.names=[],n.skips=[];for(var e=("string"==typeof t?t:"").split(/[\s,]+/),r=e.length,o=0;o<r;o++)e[o]&&("-"===(t=e[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={}},{ms:71}],61:[function(t,e,n){e.exports=function(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){return(o=e.createElement("html")).innerHTML=t,o.removeChild(o.lastChild)}var o,a=i[r]||i._default,s=a[0],c=a[1],u=a[2];(o=e.createElement("div")).innerHTML=c+t+u;for(;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);var l=e.createDocumentFragment();for(;o.firstChild;)l.appendChild(o.removeChild(o.firstChild));return l};var r,o=!1;"undefined"!=typeof document&&((r=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!r.getElementsByTagName("link").length,r=void 0);var i={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],i.option=i.optgroup=[1,'<select multiple="multiple">',"</select>"],i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","</table>"],i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],62:[function(t,e,n){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},c=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e,n=r.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||r.call(t,e)},u=function(t,e){i&&"__proto__"===e.name?i(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},l=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(a)return a(t,e).value}return t[e]};e.exports=function t(){var e,n,r,o,i,a,p=arguments[0],f=1,d=arguments.length,h=!1;for("boolean"==typeof p&&(h=p,p=arguments[1]||{},f=2),(null==p||"object"!=typeof p&&"function"!=typeof p)&&(p={});f<d;++f)if(null!=(e=arguments[f]))for(n in e)r=l(p,n),p!==(o=l(e,n))&&(h&&o&&(c(o)||(i=s(o)))?(i?(i=!1,a=r&&s(r)?r:[]):a=r&&c(r)?r:{},u(p,{name:n,newValue:t(h,a,o)})):void 0!==o&&u(p,{name:n,newValue:o}));return p}},{}],63:[function(t,e,n){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],64:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],65:[function(t,e,n){e.exports=function(t){return/.+\@.+\..+/.test(t)}},{}],66:[function(t,e,n){
/**!
     * is
     * the definitive JavaScript type testing library
     *
     * @copyright 2013-2014 Enrico Marino / Jordan Harband
     * @license MIT
     */
var r,o,i=Object.prototype,a=i.hasOwnProperty,s=i.toString;"function"==typeof Symbol&&(r=Symbol.prototype.valueOf),"function"==typeof BigInt&&(o=BigInt.prototype.valueOf);var c=function(t){return t!=t},u={boolean:1,number:1,string:1,undefined:1},l=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/,p=/^[A-Fa-f0-9]+$/,f={};f.a=f.type=function(t,e){return typeof t===e},f.defined=function(t){return void 0!==t},f.empty=function(t){var e,n=s.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(a.call(t,e))return!1;return!0}return!t},f.equal=function(t,e){if(t===e)return!0;var n,r=s.call(t);if(r!==s.call(e))return!1;if("[object Object]"===r){for(n in t)if(!f.equal(t[n],e[n])||!(n in e))return!1;for(n in e)if(!f.equal(t[n],e[n])||!(n in t))return!1;return!0}if("[object Array]"===r){if((n=t.length)!==e.length)return!1;for(;n--;)if(!f.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===r?t.prototype===e.prototype:"[object Date]"===r&&t.getTime()===e.getTime()},f.hosted=function(t,e){var n=typeof e[t];return"object"===n?!!e[t]:!u[n]},f.instance=f.instanceof=function(t,e){return t instanceof e},f.nil=f.null=function(t){return null===t},f.undef=f.undefined=function(t){return void 0===t},f.args=f.arguments=function(t){var e="[object Arguments]"===s.call(t),n=!f.array(t)&&f.arraylike(t)&&f.object(t)&&f.fn(t.callee);return e||n},f.array=Array.isArray||function(t){return"[object Array]"===s.call(t)},f.args.empty=function(t){return f.args(t)&&0===t.length},f.array.empty=function(t){return f.array(t)&&0===t.length},f.arraylike=function(t){return!!t&&!f.bool(t)&&a.call(t,"length")&&isFinite(t.length)&&f.number(t.length)&&t.length>=0},f.bool=f.boolean=function(t){return"[object Boolean]"===s.call(t)},f.false=function(t){return f.bool(t)&&!1===Boolean(Number(t))},f.true=function(t){return f.bool(t)&&!0===Boolean(Number(t))},f.date=function(t){return"[object Date]"===s.call(t)},f.date.valid=function(t){return f.date(t)&&!isNaN(Number(t))},f.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},f.error=function(t){return"[object Error]"===s.call(t)},f.fn=f.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e},f.number=function(t){return"[object Number]"===s.call(t)},f.infinite=function(t){return t===1/0||t===-1/0},f.decimal=function(t){return f.number(t)&&!c(t)&&!f.infinite(t)&&t%1!=0},f.divisibleBy=function(t,e){var n=f.infinite(t),r=f.infinite(e),o=f.number(t)&&!c(t)&&f.number(e)&&!c(e)&&0!==e;return n||r||o&&t%e==0},f.integer=f.int=function(t){return f.number(t)&&!c(t)&&t%1==0},f.maximum=function(t,e){if(c(t))throw new TypeError("NaN is not a valid value");if(!f.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t<e[n])return!1;return!0},f.minimum=function(t,e){if(c(t))throw new TypeError("NaN is not a valid value");if(!f.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t>e[n])return!1;return!0},f.nan=function(t){return!f.number(t)||t!=t},f.even=function(t){return f.infinite(t)||f.number(t)&&t==t&&t%2==0},f.odd=function(t){return f.infinite(t)||f.number(t)&&t==t&&t%2!=0},f.ge=function(t,e){if(c(t)||c(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t>=e},f.gt=function(t,e){if(c(t)||c(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t>e},f.le=function(t,e){if(c(t)||c(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t<=e},f.lt=function(t,e){if(c(t)||c(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t<e},f.within=function(t,e,n){if(c(t)||c(e)||c(n))throw new TypeError("NaN is not a valid value");if(!f.number(t)||!f.number(e)||!f.number(n))throw new TypeError("all arguments must be numbers");return f.infinite(t)||f.infinite(e)||f.infinite(n)||t>=e&&t<=n},f.object=function(t){return"[object Object]"===s.call(t)},f.primitive=function(t){return!t||!("object"==typeof t||f.object(t)||f.fn(t)||f.array(t))},f.hash=function(t){return f.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},f.regexp=function(t){return"[object RegExp]"===s.call(t)},f.string=function(t){return"[object String]"===s.call(t)},f.base64=function(t){return f.string(t)&&(!t.length||l.test(t))},f.hex=function(t){return f.string(t)&&(!t.length||p.test(t))},f.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===s.call(t)&&"symbol"==typeof r.call(t)},f.bigint=function(t){return"function"==typeof BigInt&&"[object BigInt]"===s.call(t)&&"bigint"==typeof o.call(t)},e.exports=f},{}],67:[function(t,e,n){(function(t){(function(){(function(){var r={function:!0,object:!0},o=r[typeof n]&&n&&!n.nodeType&&n,i=r[typeof window]&&window||this,a=o&&r[typeof e]&&e&&!e.nodeType&&"object"==typeof t&&t;function s(t,e){t||(t=i.Object()),e||(e=i.Object());var n=t.Number||i.Number,o=t.String||i.String,a=t.Object||i.Object,c=t.Date||i.Date,u=t.SyntaxError||i.SyntaxError,l=t.TypeError||i.TypeError,p=t.Math||i.Math,f=t.JSON||i.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var d,h=a.prototype,y=h.toString,g=h.hasOwnProperty;function m(t,e){try{t()}catch(t){e&&e()}}var v=new c(-0xc782b5b800cec);function b(t){if(null!=b[t])return b[t];var r;if("bug-string-char-index"==t)r="a"!="a"[0];else if("json"==t)r=b("json-stringify")&&b("date-serialization")&&b("json-parse");else if("date-serialization"==t){if(r=b("json-stringify")&&v){var i=e.stringify;m((function(){r='"-271821-04-20T00:00:00.000Z"'==i(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new c(-1))}))}}else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u="function"==typeof(i=e.stringify);u&&((a=function(){return 1}).toJSON=a,m((function(){u="0"===i(0)&&"0"===i(new n)&&'""'==i(new o)&&i(y)===d&&i(d)===d&&i()===d&&"1"===i(a)&&"[1]"==i([a])&&"[null]"==i([d])&&"null"==i(null)&&"[null,null,null]"==i([d,y,null])&&i({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===i(null,a)&&"[\n 1,\n 2\n]"==i([1,2],null,1)}),(function(){u=!1}))),r=u}if("json-parse"==t){var l,p=e.parse;"function"==typeof p&&m((function(){0!==p("0")||p(!1)||(a=p(s),(l=5==a.a.length&&1===a.a[0])&&(m((function(){l=!p('"\t"')})),l&&m((function(){l=1!==p("01")})),l&&m((function(){l=1!==p("1.")}))))}),(function(){l=!1})),r=l}}return b[t]=!!r}if(m((function(){v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1===v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()})),b["bug-string-char-index"]=b["date-serialization"]=b.json=b["json-stringify"]=b["json-parse"]=null,!b("json")){var w="[object Function]",j="[object Number]",x="[object String]",_="[object Array]",k=b("bug-string-char-index"),I=function(t,e){var n,o,i,a=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n)g.call(o,i)&&a++;return n=o=null,a?I=function(t,e){var n,r,o=y.call(t)==w;for(n in t)o&&"prototype"==n||!g.call(t,n)||(r="constructor"===n)||e(n);(r||g.call(t,n="constructor"))&&e(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],I=function(t,e){var n,i,a=y.call(t)==w,s=!a&&"function"!=typeof t.constructor&&r[typeof t.hasOwnProperty]&&t.hasOwnProperty||g;for(n in t)a&&"prototype"==n||!s.call(t,n)||e(n);for(i=o.length;n=o[--i];)s.call(t,n)&&e(n)}),I(t,e)};if(!b("json-stringify")&&!b("date-serialization")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(t,e){return("000000"+(e||0)).slice(-t)},O=function(t){var e,n,r,o,i,a,s,c,u;if(v)e=function(t){n=t.getUTCFullYear(),r=t.getUTCMonth(),o=t.getUTCDate(),a=t.getUTCHours(),s=t.getUTCMinutes(),c=t.getUTCSeconds(),u=t.getUTCMilliseconds()};else{var l=p.floor,f=[0,31,59,90,120,151,181,212,243,273,304,334],d=function(t,e){return f[e]+365*(t-1970)+l((t-1969+(e=+(e>1)))/4)-l((t-1901+e)/100)+l((t-1601+e)/400)};e=function(t){for(o=l(t/864e5),n=l(o/365.2425)+1970-1;d(n+1,0)<=o;n++);for(r=l((o-d(n,0))/30.42);d(n,r+1)<=o;r++);o=1+o-d(n,r),a=l((i=(t%864e5+864e5)%864e5)/36e5)%24,s=l(i/6e4)%60,c=l(i/1e3)%60,u=i%1e3}}return O=function(t){return t>-1/0&&t<1/0?(e(t),t=(n<=0||n>=1e4?(n<0?"-":"+")+C(6,n<0?-n:n):C(4,n))+"-"+C(2,r+1)+"-"+C(2,o)+"T"+C(2,a)+":"+C(2,s)+":"+C(2,c)+"."+C(3,u)+"Z",n=r=o=a=s=c=u=null):t=null,t},O(t)};if(b("json-stringify")&&!b("date-serialization")){function S(t){return O(this)}var T=e.stringify;e.stringify=function(t,e,n){var r=c.prototype.toJSON;c.prototype.toJSON=S;var o=T(t,e,n);return c.prototype.toJSON=r,o}}else{var E=function(t){var e=t.charCodeAt(0),n=A[e];return n||"\\u00"+C(2,e.toString(16))},D=/[\x00-\x1f\x22\x5c]/g,N=function(t){return D.lastIndex=0,'"'+(D.test(t)?t.replace(D,E):t)+'"'},z=function(t,e,n,r,o,i,a){var s,u,p,f,h,g,v,b,w;if(m((function(){s=e[t]})),"object"==typeof s&&s&&(s.getUTCFullYear&&"[object Date]"==y.call(s)&&s.toJSON===c.prototype.toJSON?s=O(s):"function"==typeof s.toJSON&&(s=s.toJSON(t))),n&&(s=n.call(e,t,s)),s==d)return s===d?s:"null";switch("object"==(u=typeof s)&&(p=y.call(s)),p||u){case"boolean":case"[object Boolean]":return""+s;case"number":case j:return s>-1/0&&s<1/0?""+s:"null";case"string":case x:return N(""+s)}if("object"==typeof s){for(v=a.length;v--;)if(a[v]===s)throw l();if(a.push(s),f=[],b=i,i+=o,p==_){for(g=0,v=s.length;g<v;g++)h=z(g,s,n,r,o,i,a),f.push(h===d?"null":h);w=f.length?o?"[\n"+i+f.join(",\n"+i)+"\n"+b+"]":"["+f.join(",")+"]":"[]"}else I(r||s,(function(t){var e=z(t,s,n,r,o,i,a);e!==d&&f.push(N(t)+":"+(o?" ":"")+e)})),w=f.length?o?"{\n"+i+f.join(",\n"+i)+"\n"+b+"}":"{"+f.join(",")+"}":"{}";return a.pop(),w}};e.stringify=function(t,e,n){var o,i,a,s;if(r[typeof e]&&e)if((s=y.call(e))==w)i=e;else if(s==_){a={};for(var c,u=0,l=e.length;u<l;)c=e[u++],"[object String]"!=(s=y.call(c))&&"[object Number]"!=s||(a[c]=1)}if(n)if((s=y.call(n))==j){if((n-=n%1)>0)for(n>10&&(n=10),o="";o.length<n;)o+=" "}else s==x&&(o=n.length<=10?n:n.slice(0,10));return z("",((c={})[""]=t,c),i,a,o,"",[])}}}if(!b("json-parse")){var M,P,L=o.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw M=P=null,u()},R=function(){for(var t,e,n,r,o,i=P,a=i.length;M<a;)switch(o=i.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=k?i.charAt(M):i[M],M++,t;case 34:for(t="@",M++;M<a;)if((o=i.charCodeAt(M))<32)F();else if(92==o)switch(o=i.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=U[o],M++;break;case 117:for(e=++M,n=M+4;M<n;M++)(o=i.charCodeAt(M))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();t+=L("0x"+i.slice(e,M));break;default:F()}else{if(34==o)break;for(o=i.charCodeAt(M),e=M;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++M);t+=i.slice(e,M)}if(34==i.charCodeAt(M))return M++,t;F();default:if(e=M,45==o&&(r=!0,o=i.charCodeAt(++M)),o>=48&&o<=57){for(48==o&&((o=i.charCodeAt(M+1))>=48&&o<=57)&&F(),r=!1;M<a&&((o=i.charCodeAt(M))>=48&&o<=57);M++);if(46==i.charCodeAt(M)){for(n=++M;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==M&&F(),M=n}if(101==(o=i.charCodeAt(M))||69==o){for(43!=(o=i.charCodeAt(++M))&&45!=o||M++,n=M;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==M&&F(),M=n}return+i.slice(e,M)}r&&F();var s=i.slice(M,M+4);if("true"==s)return M+=4,!0;if("fals"==s&&101==i.charCodeAt(M+4))return M+=5,!1;if("null"==s)return M+=4,null;F()}return"$"},q=function(t){var e,n;if("$"==t&&F(),"string"==typeof t){if("@"==(k?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=R());)n?","==t?"]"==(t=R())&&F():F():n=!0,","==t&&F(),e.push(q(t));return e}if("{"==t){for(e={};"}"!=(t=R());)n?","==t?"}"==(t=R())&&F():F():n=!0,","!=t&&"string"==typeof t&&"@"==(k?t.charAt(0):t[0])&&":"==R()||F(),e[t.slice(1)]=q(R());return e}F()}return t},B=function(t,e,n){var r=$(t,e,n);r===d?delete t[e]:t[e]=r},$=function(t,e,n){var r,o=t[e];if("object"==typeof o&&o)if(y.call(o)==_)for(r=o.length;r--;)B(y,I,o);else I(o,(function(t){B(o,t,n)}));return n.call(t,e,o)};e.parse=function(t,e){var n,r;return M=0,P=""+t,n=q(R()),"$"!=R()&&F(),M=P=null,e&&y.call(e)==w?$(((r={})[""]=n,r),"",e):n}}}return e.runInContext=s,e}if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),o)s(i,o);else{var c=i.JSON,u=i.JSON3,l=!1,p=s(i,i.JSON3={noConflict:function(){return l||(l=!0,i.JSON=c,i.JSON3=u,c=u=null),p}});i.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],68:[function(t,e,n){var r=t("debug")("jsonp");e.exports=function(t,e,n){"function"==typeof e&&(n=e,e={});e||(e={});var a,s,c=e.prefix||"__jp",u=e.name||c+o++,l=e.param||"callback",p=null!=e.timeout?e.timeout:6e4,f=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head;p&&(s=setTimeout((function(){h(),n&&n(new Error("Timeout"))}),p));function h(){a.parentNode&&a.parentNode.removeChild(a),window[u]=i,s&&clearTimeout(s)}return window[u]=function(t){r("jsonp got",t),h(),n&&n(null,t)},t=(t+=(~t.indexOf("?")?"&":"?")+l+"="+f(u)).replace("?&","?"),r('jsonp req "%s"',t),(a=document.createElement("script")).src=t,d.parentNode.insertBefore(a,d),function(){window[u]&&h()}};var o=0;function i(){}},{debug:59}],69:[function(t,e,n){var r=t("is"),o=t("script-onload"),i=t("next-tick");e.exports=function(t,e){if(!t)throw new Error("Cant load nothing...");r.string(t)&&(t={src:t});var n="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=n?"https:"+t.src:"http:"+t.src),n&&t.https?t.src=t.https:!n&&t.http&&(t.src=t.http);var a=document.createElement("iframe");return a.src=t.src,a.width=t.width||1,a.height=t.height||1,a.style.display="none",r.fn(e)&&o(a,e),i((function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t)})),a}},{is:66,"next-tick":76,"script-onload":79}],70:[function(t,e,n){(function(t){(function(){var r=200,o="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object Boolean]",c="[object Date]",u="[object Function]",l="[object GeneratorFunction]",p="[object Map]",f="[object Number]",d="[object Object]",h="[object Promise]",y="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",j="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",C="[object Uint8Array]",O="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]",E=/\w*$/,D=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,z={};z[a]=z["[object Array]"]=z[w]=z[j]=z[s]=z[c]=z[x]=z[_]=z[k]=z[I]=z[A]=z[p]=z[f]=z[d]=z[y]=z[g]=z[m]=z[v]=z[C]=z[O]=z[S]=z[T]=!0,z["[object Error]"]=z[u]=z[b]=!1;var M="object"==typeof t&&t&&t.Object===Object&&t,P="object"==typeof self&&self&&self.Object===Object&&self,L=M||P||Function("return this")(),U="object"==typeof n&&n&&!n.nodeType&&n,F=U&&"object"==typeof e&&e&&!e.nodeType&&e,R=F&&F.exports===U;function q(t,e){return t.set(e[0],e[1]),t}function B(t,e){return t.add(e),t}function $(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function J(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function Z(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function V(t,e){return function(n){return t(e(n))}}function H(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var X,W=Array.prototype,G=Function.prototype,K=Object.prototype,Q=L["__core-js_shared__"],Y=(X=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",tt=G.toString,et=K.hasOwnProperty,nt=K.toString,rt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=R?L.Buffer:void 0,it=L.Symbol,at=L.Uint8Array,st=V(Object.getPrototypeOf,Object),ct=Object.create,ut=K.propertyIsEnumerable,lt=W.splice,pt=Object.getOwnPropertySymbols,ft=ot?ot.isBuffer:void 0,dt=V(Object.keys,Object),ht=Ft(L,"DataView"),yt=Ft(L,"Map"),gt=Ft(L,"Promise"),mt=Ft(L,"Set"),vt=Ft(L,"WeakMap"),bt=Ft(Object,"create"),wt=Jt(ht),jt=Jt(yt),xt=Jt(gt),_t=Jt(mt),kt=Jt(vt),It=it?it.prototype:void 0,At=It?It.valueOf:void 0;function Ct(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){this.__data__=new Ot(t)}function Et(t,e){var n=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ht(t)}(t)&&et.call(t,"callee")&&(!ut.call(t,"callee")||nt.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!et.call(t,i)||o&&("length"==i||Bt(i,r))||n.push(i);return n}function Dt(t,e,n){var r=t[e];et.call(t,e)&&Zt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Nt(t,e){for(var n=t.length;n--;)if(Zt(t[n][0],e))return n;return-1}function zt(t,e,n,r,o,i,h){var b;if(r&&(b=i?r(t,o,i,h):r(t)),void 0!==b)return b;if(!Gt(t))return t;var D=Vt(t);if(D){if(b=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,b)}else{var N=qt(t),M=N==u||N==l;if(Xt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(N==d||N==a||M&&!i){if(J(t))return i?t:{};if(b=function(t){return"function"!=typeof t.constructor||$t(t)?{}:(e=st(t),Gt(e)?ct(e):{});var e}(M?{}:t),!e)return function(t,e){return Lt(t,Rt(t),e)}(t,function(t,e){return t&&Lt(e,Kt(e),t)}(b,t))}else{if(!z[N])return i?t:{};b=function(t,e,n,r){var o=t.constructor;switch(e){case w:return Pt(t);case s:case c:return new o(+t);case j:return function(t,e){var n=e?Pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case x:case _:case k:case I:case A:case C:case O:case S:case T:return function(t,e){var n=e?Pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case p:return function(t,e,n){var r=e?n(Z(t),!0):Z(t);return $(r,q,new t.constructor)}(t,r,n);case f:case m:return new o(t);case y:return function(t){var e=new t.constructor(t.source,E.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,n){var r=e?n(H(t),!0):H(t);return $(r,B,new t.constructor)}(t,r,n);case v:return i=t,At?Object(At.call(i)):{}}var i}(t,N,zt,e)}}h||(h=new Tt);var P=h.get(t);if(P)return P;if(h.set(t,b),!D)var L=n?function(t){return function(t,e,n){var r=e(t);return Vt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Kt,Rt)}(t):Kt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(L||t,(function(o,i){L&&(o=t[i=o]),Dt(b,i,zt(o,e,n,r,i,t,h))})),b}function Mt(t){return!(!Gt(t)||(e=t,Y&&Y in e))&&(Wt(t)||J(t)?rt:D).test(Jt(t));var e}function Pt(t){var e=new t.constructor(t.byteLength);return new at(e).set(new at(t)),e}function Lt(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=r?r(n[a],t[a],a,n,t):void 0;Dt(n,a,void 0===s?t[a]:s)}return n}function Ut(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Ft(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(n)?n:void 0}Ct.prototype.clear=function(){this.__data__=bt?bt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===o?void 0:n}return et.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:et.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?o:e,this},Ot.prototype.clear=function(){this.__data__=[]},Ot.prototype.delete=function(t){var e=this.__data__,n=Nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():lt.call(e,n,1),!0)},Ot.prototype.get=function(t){var e=this.__data__,n=Nt(e,t);return n<0?void 0:e[n][1]},Ot.prototype.has=function(t){return Nt(this.__data__,t)>-1},Ot.prototype.set=function(t,e){var n=this.__data__,r=Nt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},St.prototype.clear=function(){this.__data__={hash:new Ct,map:new(yt||Ot),string:new Ct}},St.prototype.delete=function(t){return Ut(this,t).delete(t)},St.prototype.get=function(t){return Ut(this,t).get(t)},St.prototype.has=function(t){return Ut(this,t).has(t)},St.prototype.set=function(t,e){return Ut(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new Ot},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ot){var o=n.__data__;if(!yt||o.length<r-1)return o.push([t,e]),this;n=this.__data__=new St(o)}return n.set(t,e),this};var Rt=pt?V(pt,Object):function(){return[]},qt=function(t){return nt.call(t)};function Bt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}function $t(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Jt(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Zt(t,e){return t===e||t!=t&&e!=e}(ht&&qt(new ht(new ArrayBuffer(1)))!=j||yt&&qt(new yt)!=p||gt&&qt(gt.resolve())!=h||mt&&qt(new mt)!=g||vt&&qt(new vt)!=b)&&(qt=function(t){var e=nt.call(t),n=e==d?t.constructor:void 0,r=n?Jt(n):void 0;if(r)switch(r){case wt:return j;case jt:return p;case xt:return h;case _t:return g;case kt:return b}return e});var Vt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Wt(t)}var Xt=ft||function(){return!1};function Wt(t){var e=Gt(t)?nt.call(t):"";return e==u||e==l}function Gt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Kt(t){return Ht(t)?Et(t):function(t){if(!$t(t))return dt(t);var e=[];for(var n in Object(t))et.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}e.exports=function(t){return zt(t,!0,!0)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(t,e,n){var r=1e3,o=60*r,i=60*o,a=24*i,s=365.25*a;function c(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){e=e||{};var n,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?c(n=t,a,"day")||c(n,i,"hour")||c(n,o,"minute")||c(n,r,"second")||n+" ms":function(t){if(t>=a)return Math.round(t/a)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=o)return Math.round(t/o)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],72:[function(t,e,n){var r=t("is"),o=t("@segment/isodate"),i=t("./milliseconds"),a=t("./seconds");e.exports=function(t){return r.date(t)?t:r.number(t)?new Date((e=t)<315576e5?1e3*e:e):o.is(t)?o.parse(t):i.is(t)?i.parse(t):a.is(t)?a.parse(t):new Date(t);var e}},{"./milliseconds":73,"./seconds":74,"@segment/isodate":75,is:66}],73:[function(t,e,n){var r=/\d{13}/;n.is=function(t){return r.test(t)},n.parse=function(t){return t=parseInt(t,10),new Date(t)}},{}],74:[function(t,e,n){var r=/\d{10}/;n.is=function(t){return r.test(t)},n.parse=function(t){var e=1e3*parseInt(t,10);return new Date(e)}},{}],75:[function(t,e,n){var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;n.parse=function(t){var e=[1,5,6,7,11,12],n=r.exec(t),o=0;if(!n)return new Date(t);for(var i,a=0;i=e[a];a++)n[i]=parseInt(n[i],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?o=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(o=60*n[11]+n[12],"+"===n[10]&&(o=0-o));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+o,n[7],n[8]);return new Date(s)},n.is=function(t,e){return(!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&r.test(t)}},{}],76:[function(t,e,n){(function(t,n){(function(){var r,o;r=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},o=function(t){var e,n=document.createTextNode(""),o=0;return new t((function(){var t;e&&(t=e,e=null,"function"!=typeof t?t.forEach((function(t){t()})):t())})).observe(n,{characterData:!0}),function(t){r(t),e?"function"==typeof e?e=[e,t]:e.push(t):(e=t,n.data=o=++o%2)}},e.exports=function(){if(void 0!==t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return o(MutationObserver);if("function"==typeof WebKitMutationObserver)return o(WebKitMutationObserver)}return"function"==typeof n?function(t){n(r(t))}:"function"==typeof setTimeout?function(t){setTimeout(r(t),0)}:null}()}).call(this)}).call(this,t("_process"),t("timers").setImmediate)},{_process:78,timers:94}],77:[function(t,e,n){function r(t){return function(e,n,r,o){var i;normalize=o&&function(t){return"function"==typeof t}(o.normalizer)?o.normalizer:a,n=normalize(n);for(var s=!1;!s;)c();function c(){for(i in e){var t=normalize(i);if(0===n.indexOf(t)){var r=n.substr(t.length);if("."===r.charAt(0)||0===r.length){n=r.substr(1);var o=e[i];return null==o?void(s=!0):n.length?void(e=o):void(s=!0)}}}i=void 0,s=!0}if(i)return null==e?e:t(e,i,r)}}function o(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function i(t,e,n){return t.hasOwnProperty(e)&&(t[e]=n),t}function a(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=r((function(t,e){if(t.hasOwnProperty(e))return t[e]})),e.exports.find=e.exports,e.exports.replace=function(t,e,n,o){return r(i).call(this,t,e,n,o),t},e.exports.del=function(t,e,n){return r(o).call(this,t,e,null,n),t}},{}],78:[function(t,e,n){var r,o,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var u,l=[],p=!1,f=-1;function d(){p&&u&&(p=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!p){var t=c(d);p=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,p=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new y(t,e)),1!==l.length||p||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],79:[function(t,e,n){e.exports=function(t,e){return t.addEventListener?function(t,e){t.addEventListener("load",(function(t,n){e(null,n)}),!1),t.addEventListener("error",(function(n){var r=new Error('script error "'+t.src+'"');r.event=n,e(r)}),!1)}(t,e):function(t,e){t.attachEvent("onreadystatechange",(function(n){/complete|loaded/.test(t.readyState)&&e(null,n)})),t.attachEvent("onerror",(function(n){var r=new Error('failed to load the script "'+t.src+'"');r.event=n||window.event,e(r)}))}(t,e)}},{}],80:[function(t,e,n){var r=t("obj-case");e.exports=function(t){function e(t,e){return function(){var n=this.traits(),o=this.properties?this.properties():{};return r(n,"address."+t)||r(n,t)||(e?r(n,"address."+e):null)||(e?r(n,e):null)||r(o,"address."+t)||r(o,t)||(e?r(o,"address."+e):null)||(e?r(o,e):null)}}t.zip=e("postalCode","zip"),t.country=e("country"),t.street=e("street"),t.state=e("state"),t.city=e("city"),t.region=e("region")}},{"obj-case":77}],81:[function(t,e,n){var r=t("./utils").inherit,o=t("./facade");function i(t,e){o.call(this,t,e)}r(i,o),i.prototype.action=function(){return"alias"},i.prototype.type=i.prototype.action,i.prototype.previousId=function(){return this.field("previousId")||this.field("from")},i.prototype.from=i.prototype.previousId,i.prototype.userId=function(){return this.field("userId")||this.field("to")},i.prototype.to=i.prototype.userId,e.exports=i},{"./facade":83,"./utils":91}],82:[function(t,e,n){var r=t("./utils").inherit,o=t("./facade");function i(t,e){o.call(this,t,e)}r(i,o),i.prototype.type=function(){return"delete"},e.exports=i},{"./facade":83,"./utils":91}],83:[function(t,e,n){var r=t("./address"),o=t("./utils").clone,i=t("./is-enabled"),a=t("new-date"),s=t("obj-case"),c=t("@segment/isodate-traverse"),u=t("./utils").type;function l(t,e){"clone"in(e=e||{})||(e.clone=!0),e.clone&&(t=o(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?a(t.timestamp):new Date,e.traverse&&c(t),this.opts=e,this.obj=t}function p(t){return o(t)}l.prototype.proxy=function(t){var e=t.split("."),n=this[t=e.shift()]||this.field(t);return n?("function"==typeof n&&(n=n.call(this)||{}),0===e.length||(n=s(n,e.join("."))),this.opts.clone?p(n):n):n},l.prototype.field=function(t){var e=this.obj[t];return this.opts.clone?p(e):e},l.proxy=function(t){return function(){return this.proxy(t)}},l.field=function(t){return function(){return this.field(t)}},l.multi=function(t){return function(){var e=this.proxy(t+"s");if("array"===u(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?o(n):n]),n||[]}},l.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");return"array"===u(n)?n[0]:void 0}},l.prototype.json=function(){var t=this.opts.clone?o(this.obj):this.obj;return this.type&&(t.type=this.type()),t},l.prototype.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?o(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),i=r[t]||s(r,t);return"object"!=typeof i&&(i=s(this.options(),t)),"object"==typeof i?i:{}}},l.prototype.context=l.prototype.options,l.prototype.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!=typeof e&&(e=this.proxy("options.all")),"boolean"!=typeof e&&(e=this.proxy("integrations.all")),"boolean"!=typeof e&&(e=!0);var n=e&&i(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var o=r[t];n="boolean"!=typeof o||o}return!!n},l.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},l.prototype.active=function(){var t=this.proxy("options.active");return null==t&&(t=!0),t},l.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},l.prototype.sessionId=l.prototype.anonymousId,l.prototype.groupId=l.proxy("options.groupId"),l.prototype.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var o=null==this[r]?this.proxy("options.traits."+r):this[r]();null!=o&&(e[t[r]]=o,delete e[r])}return e},l.prototype.library=function(){var t=this.proxy("options.library");return t?"string"==typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},l.prototype.device=function(){var t=this.proxy("context.device");"object"!==u(t)&&(t={});var e=this.library().name;return t.type||(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android")),t},l.prototype.userAgent=l.proxy("context.userAgent"),l.prototype.timezone=l.proxy("context.timezone"),l.prototype.timestamp=l.field("timestamp"),l.prototype.channel=l.field("channel"),l.prototype.ip=l.proxy("context.ip"),l.prototype.userId=l.field("userId"),r(l.prototype),e.exports=l},{"./address":80,"./is-enabled":87,"./utils":91,"@segment/isodate-traverse":36,"new-date":72,"obj-case":77}],84:[function(t,e,n){var r=t("./utils").inherit,o=t("is-email"),i=t("new-date"),a=t("./facade");function s(t,e){a.call(this,t,e)}r(s,a),s.prototype.action=function(){return"group"},s.prototype.type=s.prototype.action,s.prototype.groupId=a.field("groupId"),s.prototype.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return i(t)},s.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return o(e)?e:void 0},s.prototype.traits=function(t){var e=this.properties(),n=this.groupId();for(var r in t=t||{},n&&(e.id=n),t){var o=null==this[r]?this.proxy("traits."+r):this[r]();null!=o&&(e[t[r]]=o,delete e[r])}return e},s.prototype.name=a.proxy("traits.name"),s.prototype.industry=a.proxy("traits.industry"),s.prototype.employees=a.proxy("traits.employees"),s.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}},e.exports=s},{"./facade":83,"./utils":91,"is-email":65,"new-date":72}],85:[function(t,e,n){var r=t("./facade"),o=t("obj-case"),i=t("./utils").inherit,a=t("is-email"),s=t("new-date"),c=t("trim"),u=t("./utils").type;function l(t,e){r.call(this,t,e)}i(l,r),l.prototype.action=function(){return"identify"},l.prototype.type=l.prototype.action,l.prototype.traits=function(t){var e=this.field("traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var o=null==this[r]?this.proxy("traits."+r):this[r]();null!=o&&(e[t[r]]=o,r!==t[r]&&delete e[r])}return e},l.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return a(e)?e:void 0},l.prototype.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return s(t)},l.prototype.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return s(t)},l.prototype.companyName=function(){return this.proxy("traits.company.name")},l.prototype.name=function(){var t=this.proxy("traits.name");if("string"==typeof t)return c(t);var e=this.firstName(),n=this.lastName();return e&&n?c(e+" "+n):void 0},l.prototype.firstName=function(){var t=this.proxy("traits.firstName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");return"string"==typeof e?c(e).split(" ")[0]:void 0},l.prototype.lastName=function(){var t=this.proxy("traits.lastName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");if("string"==typeof e){var n=c(e).indexOf(" ");if(-1!==n)return c(e.substr(n+1))}},l.prototype.uid=function(){return this.userId()||this.username()||this.email()},l.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},l.prototype.age=function(){var t=this.birthday(),e=o(this.traits(),"age");return null!=e?e:"date"===u(t)?(new Date).getFullYear()-t.getFullYear():void 0},l.prototype.avatar=function(){var t=this.traits();return o(t,"avatar")||o(t,"photoUrl")||o(t,"avatarUrl")},l.prototype.position=function(){var t=this.traits();return o(t,"position")||o(t,"jobTitle")},l.prototype.username=r.proxy("traits.username"),l.prototype.website=r.one("traits.website"),l.prototype.websites=r.multi("traits.website"),l.prototype.phone=r.one("traits.phone"),l.prototype.phones=r.multi("traits.phone"),l.prototype.address=r.proxy("traits.address"),l.prototype.gender=r.proxy("traits.gender"),l.prototype.birthday=r.proxy("traits.birthday"),e.exports=l},{"./facade":83,"./utils":91,"is-email":65,"new-date":72,"obj-case":77,trim:97}],86:[function(t,e,n){var r=t("./facade");r.Alias=t("./alias"),r.Group=t("./group"),r.Identify=t("./identify"),r.Track=t("./track"),r.Page=t("./page"),r.Screen=t("./screen"),r.Delete=t("./delete"),e.exports=r},{"./alias":81,"./delete":82,"./facade":83,"./group":84,"./identify":85,"./page":88,"./screen":89,"./track":90}],87:[function(t,e,n){var r={Salesforce:!0};e.exports=function(t){return!r[t]}},{}],88:[function(t,e,n){var r=t("./utils").inherit,o=t("./facade"),i=t("./track"),a=t("is-email");function s(t,e){o.call(this,t,e)}r(s,o),s.prototype.action=function(){return"page"},s.prototype.type=s.prototype.action,s.prototype.category=o.field("category"),s.prototype.name=o.field("name"),s.prototype.title=o.proxy("properties.title"),s.prototype.path=o.proxy("properties.path"),s.prototype.url=o.proxy("properties.url"),s.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},s.prototype.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();for(var o in t=t||{},n&&(e.category=n),r&&(e.name=r),t){var i=null==this[o]?this.proxy("properties."+o):this[o]();null!=i&&(e[t[o]]=i,o!==t[o]&&delete e[o])}return e},s.prototype.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return a(e)?e:void 0},s.prototype.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},s.prototype.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},s.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new i(e,this.opts)},e.exports=s},{"./facade":83,"./track":90,"./utils":91,"is-email":65}],89:[function(t,e,n){var r=t("./utils").inherit,o=t("./page"),i=t("./track");function a(t,e){o.call(this,t,e)}r(a,o),a.prototype.action=function(){return"screen"},a.prototype.type=a.prototype.action,a.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},a.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new i(e,this.opts)},e.exports=a},{"./page":88,"./track":90,"./utils":91}],90:[function(t,e,n){var r=t("./utils").inherit,o=t("./utils").type,i=t("./facade"),a=t("./identify"),s=t("is-email"),c=t("obj-case");function u(t,e){i.call(this,t,e)}r(u,i),u.prototype.action=function(){return"track"},u.prototype.type=u.prototype.action,u.prototype.event=i.field("event"),u.prototype.value=i.proxy("properties.value"),u.prototype.category=i.proxy("properties.category"),u.prototype.id=i.proxy("properties.id"),u.prototype.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},u.prototype.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},u.prototype.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},u.prototype.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},u.prototype.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},u.prototype.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},u.prototype.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},u.prototype.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},u.prototype.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},u.prototype.sku=i.proxy("properties.sku"),u.prototype.tax=i.proxy("properties.tax"),u.prototype.name=i.proxy("properties.name"),u.prototype.price=i.proxy("properties.price"),u.prototype.total=i.proxy("properties.total"),u.prototype.repeat=i.proxy("properties.repeat"),u.prototype.coupon=i.proxy("properties.coupon"),u.prototype.shipping=i.proxy("properties.shipping"),u.prototype.discount=i.proxy("properties.discount"),u.prototype.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},u.prototype.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},u.prototype.description=i.proxy("properties.description"),u.prototype.plan=i.proxy("properties.plan"),u.prototype.subtotal=function(){var t=c(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),(n=this.shipping())&&(e-=n),(n=this.discount())&&(e+=n)}return e},u.prototype.products=function(){var t=this.properties(),e=c(t,"products");return"array"===o(e)?e:[]},u.prototype.quantity=function(){return(this.obj.properties||{}).quantity||1},u.prototype.currency=function(){return(this.obj.properties||{}).currency||"USD"},u.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},u.prototype.query=i.proxy("options.query"),u.prototype.properties=function(t){var e=this.field("properties")||{};for(var n in t=t||{}){var r=null==this[n]?this.proxy("properties."+n):this[n]();null!=r&&(e[t[n]]=r,delete e[n])}return e},u.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},u.prototype.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return s(e)?e:void 0},u.prototype.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event();return!t&&e&&e.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(t=this.proxy("properties.total")),function(t){if(!t)return;if("number"==typeof t)return t;if("string"!=typeof t)return;if(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t))return t}(t)},u.prototype.cents=function(){var t=this.revenue();return"number"!=typeof t?this.value()||0:100*t},u.prototype.identify=function(){var t=this.json();return t.traits=this.traits(),new a(t,this.opts)},e.exports=u},{"./facade":83,"./identify":85,"./utils":91,"is-email":65,"obj-case":77}],91:[function(t,e,n){n.inherit=t("inherits"),n.clone=t("@ndhoule/clone"),n.type=t("type-component")},{"@ndhoule/clone":3,inherits:64,"type-component":98}],92:[function(t,e,n){e.exports=function(t,e){return e||(e={}),t.toLowerCase().replace(e.replace||/[^a-z0-9]/g," ").replace(/^ +| +$/g,"").replace(/ +/g,e.separator||"-")}},{}],93:[function(t,e,n){!function(t){if("object"==typeof n)e.exports=t();else{var r;try{r=window}catch(t){r=self}r.SparkMD5=t()}}((function(t){var e=function(t,e){return t+e&4294967295},n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,n,r,o,i,a){return n=e(e(n,t),e(o,a)),e(n<<i|n>>>32-i,r)}function o(t,e,n,o,i,a,s){return r(e&n|~e&o,t,e,i,a,s)}function i(t,e,n,o,i,a,s){return r(e&o|n&~o,t,e,i,a,s)}function a(t,e,n,o,i,a,s){return r(e^n^o,t,e,i,a,s)}function s(t,e,n,o,i,a,s){return r(n^(e|~o),t,e,i,a,s)}function c(t,n){var r=t[0],c=t[1],u=t[2],l=t[3];r=o(r,c,u,l,n[0],7,-680876936),l=o(l,r,c,u,n[1],12,-389564586),u=o(u,l,r,c,n[2],17,606105819),c=o(c,u,l,r,n[3],22,-1044525330),r=o(r,c,u,l,n[4],7,-176418897),l=o(l,r,c,u,n[5],12,1200080426),u=o(u,l,r,c,n[6],17,-1473231341),c=o(c,u,l,r,n[7],22,-45705983),r=o(r,c,u,l,n[8],7,1770035416),l=o(l,r,c,u,n[9],12,-1958414417),u=o(u,l,r,c,n[10],17,-42063),c=o(c,u,l,r,n[11],22,-1990404162),r=o(r,c,u,l,n[12],7,1804603682),l=o(l,r,c,u,n[13],12,-40341101),u=o(u,l,r,c,n[14],17,-1502002290),r=i(r,c=o(c,u,l,r,n[15],22,1236535329),u,l,n[1],5,-165796510),l=i(l,r,c,u,n[6],9,-1069501632),u=i(u,l,r,c,n[11],14,643717713),c=i(c,u,l,r,n[0],20,-373897302),r=i(r,c,u,l,n[5],5,-701558691),l=i(l,r,c,u,n[10],9,38016083),u=i(u,l,r,c,n[15],14,-660478335),c=i(c,u,l,r,n[4],20,-405537848),r=i(r,c,u,l,n[9],5,568446438),l=i(l,r,c,u,n[14],9,-1019803690),u=i(u,l,r,c,n[3],14,-187363961),c=i(c,u,l,r,n[8],20,1163531501),r=i(r,c,u,l,n[13],5,-1444681467),l=i(l,r,c,u,n[2],9,-51403784),u=i(u,l,r,c,n[7],14,1735328473),r=a(r,c=i(c,u,l,r,n[12],20,-1926607734),u,l,n[5],4,-378558),l=a(l,r,c,u,n[8],11,-2022574463),u=a(u,l,r,c,n[11],16,1839030562),c=a(c,u,l,r,n[14],23,-35309556),r=a(r,c,u,l,n[1],4,-1530992060),l=a(l,r,c,u,n[4],11,1272893353),u=a(u,l,r,c,n[7],16,-155497632),c=a(c,u,l,r,n[10],23,-1094730640),r=a(r,c,u,l,n[13],4,681279174),l=a(l,r,c,u,n[0],11,-358537222),u=a(u,l,r,c,n[3],16,-722521979),c=a(c,u,l,r,n[6],23,76029189),r=a(r,c,u,l,n[9],4,-640364487),l=a(l,r,c,u,n[12],11,-421815835),u=a(u,l,r,c,n[15],16,530742520),r=s(r,c=a(c,u,l,r,n[2],23,-995338651),u,l,n[0],6,-198630844),l=s(l,r,c,u,n[7],10,1126891415),u=s(u,l,r,c,n[14],15,-1416354905),c=s(c,u,l,r,n[5],21,-57434055),r=s(r,c,u,l,n[12],6,1700485571),l=s(l,r,c,u,n[3],10,-1894986606),u=s(u,l,r,c,n[10],15,-1051523),c=s(c,u,l,r,n[1],21,-2054922799),r=s(r,c,u,l,n[8],6,1873313359),l=s(l,r,c,u,n[15],10,-30611744),u=s(u,l,r,c,n[6],15,-1560198380),c=s(c,u,l,r,n[13],21,1309151649),r=s(r,c,u,l,n[4],6,-145523070),l=s(l,r,c,u,n[11],10,-1120210379),u=s(u,l,r,c,n[2],15,718787259),c=s(c,u,l,r,n[9],21,-343485551),t[0]=e(r,t[0]),t[1]=e(c,t[1]),t[2]=e(u,t[2]),t[3]=e(l,t[3])}function u(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function l(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function p(t){var e,n,r,o,i,a,s=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)c(l,u(t.substring(e-64,e)));for(n=(t=t.substring(e-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(c(l,r),e=0;e<16;e+=1)r[e]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,c(l,r),l}function f(t){var e,r="";for(e=0;e<4;e+=1)r+=n[t>>8*e+4&15]+n[t>>8*e&15];return r}function d(t){var e;for(e=0;e<t.length;e+=1)t[e]=f(t[e]);return t.join("")}function h(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function y(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function g(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==d(p("hello"))&&(e=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,a,s,c=this.byteLength,u=e(n,c),l=c;return r!==t&&(l=e(r,c)),u>l?new ArrayBuffer(0):(o=l-u,i=new ArrayBuffer(o),a=new Uint8Array(i),s=new Uint8Array(this,u,o),a.set(s),i)}}(),g.prototype.append=function(t){return this.appendBinary(h(t)),this},g.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,n=this._buff.length;for(e=64;e<=n;e+=64)c(this._hash,u(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},g.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=d(this._hash),t&&(n=y(n)),this.reset(),n},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},g.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(t,e){var n,r,o,i=e;if(t[i>>2]|=128<<(i%4<<3),i>55)for(c(this._hash,t),i=0;i<16;i+=1)t[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),o=parseInt(n[1],16)||0,t[14]=r,t[15]=o,c(this._hash,t)},g.hash=function(t,e){return g.hashBinary(h(t),e)},g.hashBinary=function(t,e){var n=d(p(t));return e?y(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(t){var e,n,r,o,i,a=(n=this._buff.buffer,r=t,o=!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),o?i:i.buffer),s=a.length;for(this._length+=t.byteLength,e=64;e<=s;e+=64)c(this._hash,l(a.subarray(e-64,e)));return this._buff=e-64<s?new Uint8Array(a.buffer.slice(e-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=d(this._hash),t&&(n=y(n)),this.reset(),n},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var t,e=g.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},g.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}(t.buff,!0),g.prototype.setState.call(this,t)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(t,e){var n=d(function(t){var e,n,r,o,i,a,s=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)c(u,l(t.subarray(e-64,e)));for(n=(t=e-64<s?t.subarray(e-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t[e]<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(c(u,r),e=0;e<16;e+=1)r[e]=0;return o=(o=8*s).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),a=parseInt(o[1],16)||0,r[14]=i,r[15]=a,c(u,r),u}(new Uint8Array(t)));return e?y(n):n},g}))},{}],94:[function(t,e,n){(function(e,r){(function(){var o=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;function u(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new u(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new u(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,r=!(arguments.length<2)&&a.call(arguments,1);return s[e]=!0,o((function(){s[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof r?r:function(t){delete s[t]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":78,timers:94}],95:[function(t,e,n){var r;try{r=t("props")}catch(e){r=t("component-props")}function o(t){switch({}.toString.call(t)){case"[object Object]":return function(t){var e={};for(var n in t)e[n]="string"==typeof t[n]?i(t[n]):o(t[n]);return function(t){if("object"!=typeof t)return!1;for(var n in e){if(!(n in t))return!1;if(!e[n](t[n]))return!1}return!0}}(t);case"[object Function]":return t;case"[object String]":return/^ *\W+/.test(n=t)?new Function("_","return _ "+n):new Function("_","return "+function(t){var e,n,o,i=r(t);if(!i.length)return"_."+t;for(n=0;n<i.length;n++)t=a(o=i[n],t,e="('function' == typeof "+(e="_."+o)+" ? "+e+"() : "+e+")");return t}(n));case"[object RegExp]":return e=t,function(t){return e.test(t)};default:return i(t)}var e,n}function i(t){return function(e){return t===e}}function a(t,e,n){return e.replace(new RegExp("(\\.)?"+t,"g"),(function(t,e){return e?t:n}))}e.exports=o},{"component-props":54,props:54}],96:[function(t,e,n){e.exports=function(t){return r.test(t)?t.toLowerCase():o.test(t)?(function(t){return t.replace(i,(function(t,e){return e?" "+e:""}))}(t)||t).toLowerCase():function(t){return t.replace(a,(function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")}))}(t).toLowerCase()};var r=/\s/,o=/[\W_]/;var i=/[\W_]+(.|$)/g;var a=/(.)([A-Z]+)/g},{}],97:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],98:[function(t,e,n){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],99:[function(t,e,n){e.exports=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}},{}],100:[function(t,e,n){(function(t){(function(){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}e.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],101:[function(t,e,n){for(var r=t("./rng"),o=[],i={},a=0;a<256;a++)o[a]=(a+256).toString(16).substr(1),i[o[a]]=a;function s(t,e){var n=e||0,r=o;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}var c=r(),u=[1|c[0],c[1],c[2],c[3],c[4],c[5]],l=16383&(c[6]<<8|c[7]),p=0,f=0;function d(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var a=0;a<16;a++)e[o+a]=i[a];return e||s(i)}var h=d;h.v1=function(t,e,n){var r=e&&n||0,o=e||[],i=void 0!==(t=t||{}).clockseq?t.clockseq:l,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),c=void 0!==t.nsecs?t.nsecs:f+1,d=a-p+(c-f)/1e4;if(d<0&&void 0===t.clockseq&&(i=i+1&16383),(d<0||a>p)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=a,f=c,l=i;var h=(1e4*(268435455&(a+=122192928e5))+c)%4294967296;o[r++]=h>>>24&255,o[r++]=h>>>16&255,o[r++]=h>>>8&255,o[r++]=255&h;var y=a/4294967296*1e4&268435455;o[r++]=y>>>8&255,o[r++]=255&y,o[r++]=y>>>24&15|16,o[r++]=y>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var g=t.node||u,m=0;m<6;m++)o[r+m]=g[m];return e||s(o)},h.v4=d,h.parse=function(t,e,n){var r=e&&n||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,(function(t){o<16&&(e[r+o++]=i[t])}));o<16;)e[r+o++]=0;return e},h.unparse=s,e.exports=h},{"./rng":100}],102:[function(t,e,n){e.exports={name:"unomi-analytics",version:"1.0.10",description:"The Apache Unomi analytics.js integration.",main:"dist/unomi-tracker.js",keywords:["unomi","analytics.js","apache"],author:"Apache Software Foundation",license:"Apache-2.0",scripts:{build:"yarn browserify && yarn snippet:browserify && yarn replace && yarn minify && yarn snippet:minify",browserify:"browserify src/index.js -p [ browserify-header --file src/license.js ] -s dxp -o dist/unomi-tracker.js","snippet:browserify":"browserify src/snippet.js -o dist/snippet.js",replace:"replace-in-file 'analytics.require = require' '//analytics.require = require' dist/unomi-tracker.js",minify:"cd dist && uglifyjs -c -m --comments '/@license/' -o unomi-tracker.min.js --source-map url=unomi-tracker.min.js.map -- unomi-tracker.js","snippet:minify":"cd dist && uglifyjs -c -m -o snippet.min.js --source-map url=snipper.min.js.map -- snippet.js",clean:"rimraf *.log dist/*","clean:all":"yarn clean && rimraf node_modules"},dependencies:{"@segment/analytics.js-core":"3.10.1","@segment/analytics.js-integration":"3.2.1",extend:"^3.0.2"},devDependencies:{browserify:"^16.5.1","browserify-header":"^1.0.1","replace-in-file":"^3.4.2",rimraf:"^2.6.2","uglify-js":"^3.9.2",yarn:"^1.22.4"}}},{}],103:[function(t,e,n){var r=t("@segment/analytics.js-integration"),o=t("extend"),i=e.exports=r("Apache Unomi").global("cxs").assumesPageview().readyOnLoad().option("scope","systemscope").option("url","http://localhost:8181").option("timeoutInMilliseconds",3e3).option("sessionCookieName","unomiSessionId").option("sessionId");i.prototype.initialize=function(){var e=this;if(console.info("[UNOMI] Initializing...",arguments),this.analytics.on("invoke",(function(t){var n=t.action(),r="on"+t.action();e.debug("%s %o",n,t),e[r]&&e[r](t)})),this.analytics.personalize=function(t,e){this.emit("invoke",{action:function(){return"personalize"},personalization:t,callback:e})},navigator.cookieEnabled){window.digitalData=window.digitalData||{scope:e.options.scope},window.digitalData.page=window.digitalData.page||{path:location.pathname+location.hash,pageInfo:{pageName:document.title,pageID:location.pathname+location.hash,pagePath:location.pathname+location.hash,destinationURL:location.href}};var n=window.digitalData.page;if(n||(n=window.digitalData.page={pageInfo:{}}),e.options.initialPageProperties){var r=e.options.initialPageProperties;this.fillPageData(n,r)}if(window.digitalData.events=window.digitalData.events||[],window.digitalData.events.push(this.buildEvent("view",this.buildPage(n),this.buildSource(this.options.scope,"site"))),e.options.sessionId)this.sessionId=e.options.sessionId;else{var o=t("component-cookie");e.sessionId=o(e.options.sessionCookieName),e.sessionId&&""!==e.sessionId||(e.sessionId=e.generateGuid(),o(e.options.sessionCookieName,e.sessionId))}setTimeout(e.loadContext.bind(e),0)}else this.executeFallback()},i.prototype.loaded=function(){return!!window.cxs},i.prototype.page=function(t){var e={};this.fillPageData(e,t.json().properties),this.collectEvent(this.buildEvent("view",this.buildPage(e),this.buildSource(this.options.scope,"site")))},i.prototype.fillPageData=function(t,e){t.attributes=[],t.consentTypes=[],t.interests=e.interests||{},t.pageInfo=o({},t.pageInfo,e.pageInfo),t.pageInfo.pageName=t.pageInfo.pageName||e.title,t.pageInfo.pageID=t.pageInfo.pageID||e.path,t.pageInfo.pagePath=t.pageInfo.pagePath||e.path,t.pageInfo.destinationURL=t.pageInfo.destinationURL||e.url,t.pageInfo.referringURL=t.pageInfo.referringURL||e.referrer,this.processReferrer()},i.prototype.processReferrer=function(){var t=document.referrer;if(t){var e=document.createElement("a");e.href=t;var n=document.createElement("a");if(n.href=document.URL,e.host!==n.host){var r=e.search,o=void 0;if(r&&""!=r){for(var i,a=[],s=r.slice(1).split("&"),c=0;c<s.length;c++)i=s[c].split("="),a.push(i[0]),a[i[0]]=i[1];o=a.q||a.p,o=decodeURIComponent(o).replace(/\+/g," ")}window.digitalData&&window.digitalData.page&&window.digitalData.page.pageInfo&&(window.digitalData.page.pageInfo.referrerHost=e.host,window.digitalData.page.pageInfo.referrerQuery=o),this.registerEvent(this.buildEvent("viewFromReferrer",this.buildTargetPage()))}}},i.prototype.identify=function(t){this.collectEvent(this.buildEvent("identify",this.buildTarget(t.userId(),"analyticsUser",t.traits()),this.buildSource(this.options.scope,"site",t.context())))},i.prototype.track=function(t){if(t.event()&&0===t.event().indexOf("form")){var e=document.forms[t.properties().formName],n=this.buildFormEvent(e.name);n.properties=this.extractFormData(e),this.collectEvent(n)}else this.collectEvent(this.buildEvent(t.event(),this.buildTargetPage(),this.buildSource(this.options.scope,"site",t.context()),t.properties()))},i.prototype.loadContext=function(t,e){this.contextLoaded=!0;var n={requiredProfileProperties:["j:nodename"],source:this.buildPage(window.digitalData.page)};t||(n.events=window.digitalData.events),window.digitalData.personalizationCallback&&(n.personalizations=window.digitalData.personalizationCallback.map((function(t){return t.personalization}))),n.sessionId=this.sessionId;var r=this.options.url+"/context.json";e&&(r+="?invalidateSession=true&invalidateProfile=true");var o=this;this.ajax({url:r,type:"POST",async:!0,contentType:"text/plain;charset=UTF-8",jsonData:n,dataType:"application/json",invalidate:e,success:function(t){if(window.cxs=JSON.parse(t.responseText),o.ready(),window.digitalData.loadCallbacks){console.info("[UNOMI] Found context server load callbacks, calling now...");for(var e=0;e<window.digitalData.loadCallbacks.length;e++)window.digitalData.loadCallbacks[e](digitalData)}if(window.digitalData.personalizationCallback){console.info("[UNOMI] Found context server personalization, calling now...");for(e=0;e<window.digitalData.personalizationCallback.length;e++)window.digitalData.personalizationCallback[e].callback(cxs.personalizations[window.digitalData.personalizationCallback[e].personalization.id])}},error:this.executeFallback}),console.info("[UNOMI] Context loading...")},i.prototype.onpersonalize=function(t){this.contextLoaded?console.error("[UNOMI] Already loaded, too late..."):(window.digitalData=window.digitalData||{scope:this.options.scope},window.digitalData.personalizationCallback=window.digitalData.personalizationCallback||[],window.digitalData.personalizationCallback.push({personalization:t.personalization,callback:t.callback}))},i.prototype.buildEvent=function(t,e,n,r){var o={eventType:t,scope:window.digitalData.scope};return e&&(o.target=e),n&&(o.source=n),r&&(o.properties=r),o},i.prototype.buildFormEvent=function(t){return this.buildEvent("form",this.buildTarget(t,"form"),this.buildSourcePage())},i.prototype.buildTargetPage=function(){return this.buildTarget(window.digitalData.page.pageInfo.pageID,"page",window.digitalData.page)},i.prototype.buildSourcePage=function(){return this.buildSource(window.digitalData.page.pageInfo.pageID,"page",window.digitalData.page)},i.prototype.buildPage=function(t){return this.buildSource(t.pageInfo.pageID,"page",t)},i.prototype.buildTarget=function(t,e,n){return this.buildObject(t,e,n)},i.prototype.buildSource=function(t,e,n){return this.buildObject(t,e,n)},i.prototype.collectEvent=function(t,e,n){this.collectEvents({events:[t]},e,n)},i.prototype.collectEvents=function(t,e,n){t.sessionId=this.sessionId;var r=JSON.stringify(t);this.ajax({url:this.options.url+"/eventcollector",type:"POST",async:!0,contentType:"text/plain;charset=UTF-8",data:r,dataType:"application/json",success:e,error:n})},i.prototype.registerEvent=function(t){window.digitalData?window.cxs?console.error("[UNOMI] already loaded, too late..."):(window.digitalData.events=window.digitalData.events||[],window.digitalData.events.push(t)):(window.digitalData={},window.digitalData.events=window.digitalData.events||[],window.digitalData.events.push(t))},i.prototype.registerCallback=function(t){window.digitalData?window.cxs?(console.info("[UNOMI] digitalData object loaded, calling on load callback immediately and registering update callback..."),t&&t(window.digitalData)):(console.info("[UNOMI] digitalData object present but not loaded, registering load callback..."),t&&(window.digitalData.loadCallbacks=window.digitalData.loadCallbacks||[],window.digitalData.loadCallbacks.push(t))):(console.info("[UNOMI] No digital data object found, creating and registering update callback..."),window.digitalData={},t&&(window.digitalData.loadCallbacks=[],window.digitalData.loadCallbacks.push(t)))},i.prototype.generateGuid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},i.prototype.buildObject=function(t,e,n){var r={scope:window.digitalData.scope,itemId:t,itemType:e};return n&&(r.properties=n),r},i.prototype.ajax=function(t){var e=new XMLHttpRequest;"withCredentials"in e?(e.open(t.type,t.url,t.async),e.withCredentials=!0):"undefined"!=typeof XDomainRequest&&(e=new XDomainRequest).open(t.type,t.url),t.contentType&&e.setRequestHeader("Content-Type",t.contentType),t.dataType&&e.setRequestHeader("Accept",t.dataType),t.responseType&&(e.responseType=t.responseType);var n=!1;-1!==this.options.timeoutInMilliseconds&&setTimeout((function(){n||(console.error("[UNOMI] XML request timeout, url: "+t.url),n=!0,t.error&&t.error(e))}),this.options.timeoutInMilliseconds),e.onreadystatechange=function(){n||4===e.readyState&&(200===e.status||204===e.status||304===e.status?null!=e.responseText&&(n=!0,t.success&&t.success(e)):(n=!0,t.error&&t.error(e),console.error("[UNOMI] XML request error: "+e.statusText+" ("+e.status+")")))},t.jsonData?e.send(JSON.stringify(t.jsonData)):t.data?e.send(t.data):e.send()},i.prototype.executeFallback=function(){for(var t in console.warn("[UNOMI] execute fallback"),window.cxs={},window.digitalData.loadCallbacks)window.digitalData.loadCallbacks[t]();if(window.digitalData.personalizationCallback)for(var e=0;e<window.digitalData.personalizationCallback.length;e++)window.digitalData.personalizationCallback[e].callback([window.digitalData.personalizationCallback[e].personalization.strategyOptions.fallback])},i.prototype.extractFormData=function(t){for(var e={},n=0;n<t.elements.length;n++){var r=t.elements[n];if(void 0!==r.name)switch(r.nodeName){case"TEXTAREA":case"INPUT":switch(r.type){case"checkbox":document.querySelectorAll('input[name="'+r.name+'"]').length>1&&(e[r.name]||(e[r.name]=[]),r.checked&&e[r.name].push(r.value));break;case"radio":r.checked&&(e[r.name]=r.value);break;default:if(!r.value||""===r.value)break;e[r.name]=r.value}break;case"SELECT":if(r.options&&r.options[r.selectedIndex])if(r.multiple){e[r.name]=[];for(var o=0;o<r.options.length;o++)r.options[o].selected&&e[r.name].push(r.options[o].value)}else e[r.name]=r.options[r.selectedIndex].value;break;default:console.warn("[UNOMI] "+r.nodeName+" form element type not implemented and will not be tracked.")}}return e}},{"@segment/analytics.js-integration":29,"component-cookie":46,extend:62}],104:[function(t,e,n){var r=t("@segment/analytics.js-core"),o=t("./integrations");for(var i in e.exports=n=r,r.require=t,n.VERSION=t("../package.json").version,o)r.use(o[i])},{"../package.json":102,"./integrations":105,"@segment/analytics.js-core":19}],105:[function(t,e,n){e.exports={"apache-unomi":t("./analytics.js-integration-apache-unomi")}},{"./analytics.js-integration-apache-unomi":103}]},{},[104])(104)}));